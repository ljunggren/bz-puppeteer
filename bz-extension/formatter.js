var formatter={
  idx:0,
  cameraList:[],
  chking:30,
  startUrl:"",
  logMap:{},
  insertCss:function(){
    let s=document.createElement("style")
    document.body.append(s)
    s.innerText=`

.body{
  color: #363D4A;
  font-size: 13px;
}
.disable-select{
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.bz-download { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020%2018.928%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23363d4a%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22download%22%20transform%3D%22translate%28-6.41%20-6.946%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_497%22%20data-name%3D%22Path%20497%22%20class%3D%22cls-1%22%20d%3D%22M12.692%2C18.139a.769.769%2C0%2C1%2C1%2C1.088-1.088l1.861%2C1.861V7.716a.769.769%2C0%2C1%2C1%2C1.538%2C0v11.2l1.861-1.861a.769.769%2C0%2C1%2C1%2C1.088%2C1.088l-3.174%2C3.174a.769.769%2C0%2C0%2C1-.252.167l-.012%2C0a.751.751%2C0%2C0%2C1-.561%2C0l-.012%2C0a.769.769%2C0%2C0%2C1-.252-.167ZM25.641%2C20a.769.769%2C0%2C0%2C0-.769.769v3.566H7.949V20.769a.769.769%2C0%2C1%2C0-1.538%2C0V25.1a.769.769%2C0%2C0%2C0%2C.769.769H25.641a.769.769%2C0%2C0%2C0%2C.769-.769V20.769A.769.769%2C0%2C0%2C0%2C25.641%2C20Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-copy { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2018.4%2018.4%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%230069ff%3B%20%20%20%20%20%20%20%20stroke%3A%20%230069ff%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.4px%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22copy-strong%22%20transform%3D%22translate%280.2%200.2%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_31%22%20data-name%3D%22Path%2031%22%20class%3D%22cls-1%22%20d%3D%22M11.25%2C4.5V0H3.375L0%2C3.375V13.5H6.75V18H18V4.5ZM3.375%2C1.591V3.375H1.591ZM1.125%2C12.375V4.5H4.5V1.125h5.625V4.5L6.75%2C7.875v4.5Zm9-6.284V7.875H8.341Zm6.75%2C10.784h-9V9H11.25V5.625h5.625Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-analyze:before {
  content:"üìã";
}
.bz-new-bug { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2220.2%22%20height%3D%2220.003%22%20viewBox%3D%220%200%2020.2%2020.003%22%3E%20%20%3Cg%20id%3D%22root-cause%22%20transform%3D%22translate%28-4.916%20-5.373%29%22%3E%20%20%20%20%3Crect%20id%3D%22Rectangle_216%22%20data-name%3D%22Rectangle%20216%22%20width%3D%226.037%22%20height%3D%221.006%22%20transform%3D%22translate%2811.255%209.699%29%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_570%22%20data-name%3D%22Path%20570%22%20d%3D%22M8.276%2C11.507%2C9%2C10.785l.722.721.569-.569-.722-.721.722-.722L9.72%2C8.925%2C9%2C9.646l-.721-.721-.57.569.722.722-.722.722Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_571%22%20data-name%3D%22Path%20571%22%20d%3D%22M9.921%2C13.377%2C8.669%2C14.629l-.594-.593-.569.569%2C1.163%2C1.163%2C1.821-1.822Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_572%22%20data-name%3D%22Path%20572%22%20d%3D%22M8.075%2C18.467l-.569.569L8.669%2C20.2l1.821-1.822-.569-.569L8.669%2C19.061Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_573%22%20data-name%3D%22Path%20573%22%20d%3D%22M6.525%2C23.082V6.982H19.606v5.744a1.7%2C1.7%2C0%2C0%2C1%2C1.034-.35%2C1.722%2C1.722%2C0%2C0%2C1%2C.476.068V6.479A1.009%2C1.009%2C0%2C0%2C0%2C20.11%2C5.473H6.022A1.009%2C1.009%2C0%2C0%2C0%2C5.016%2C6.479V23.585a1.009%2C1.009%2C0%2C0%2C0%2C1.006%2C1.006h6.411a1.705%2C1.705%2C0%2C0%2C1%2C.384-1.509Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_574%22%20data-name%3D%22Path%20574%22%20d%3D%22M11.255%2C19.56h1.028a1.7%2C1.7%2C0%2C0%2C1%2C1.306-.615h.257c.007-.018.014-.036.02-.054l-.358-.337H11.255Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_575%22%20data-name%3D%22Path%20575%22%20d%3D%22M16.007%2C14.737a1.736%2C1.736%2C0%2C0%2C1-.121-.611H11.255v1.007h4.513A3.527%2C3.527%2C0%2C0%2C1%2C16.007%2C14.737Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_576%22%20data-name%3D%22Path%20576%22%20d%3D%22M14.492%2C16.608a.379.379%2C0%2C0%2C0-.533.539l.9.848c.071.071.167.055.267.055h.734a4.855%2C4.855%2C0%2C0%2C0-.993%2C2.229h-1.28a.394.394%2C0%2C0%2C0%2C0%2C.787h1.224a3.964%2C3.964%2C0%2C0%2C0%2C.462%2C1.836H15a.4.4%2C0%2C0%2C0-.267.129l-.9.913a.381.381%2C0%2C0%2C0%2C0%2C.537.377.377%2C0%2C0%2C0%2C.266.112.372.372%2C0%2C0%2C0%2C.266-.11l.792-.794h.608a4.355%2C4.355%2C0%2C0%2C0%2C3.085%2C1.581V17.394H15.283Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_577%22%20data-name%3D%22Path%20577%22%20d%3D%22M24.64%2C20.279H23.333a5.831%2C5.831%2C0%2C0%2C0-1.072-2.229h.84c.1%2C0%2C.2.017.267-.053l.9-.876a.359.359%2C0%2C0%2C0%2C0-.518.376.376%2C0%2C0%2C0-.533%2C0l-.791.793H19.377v7.874a4.914%2C4.914%2C0%2C0%2C0%2C3.064-1.579h.629l.792.8a.376.376%2C0%2C1%2C0%2C.533-.531l-.9-.922a.4.4%2C0%2C0%2C0-.267-.129h-.288a3.919%2C3.919%2C0%2C0%2C0%2C.468-1.836h1.233a.394.394%2C0%2C0%2C0%2C0-.787Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_578%22%20data-name%3D%22Path%20578%22%20d%3D%22M16.678%2C16.869h4.873a2.335%2C2.335%2C0%2C0%2C0-1.139-2.04l.492-.482a.371.371%2C0%2C0%2C0%2C0-.528.377.377%2C0%2C0%2C0-.533%2C0l-.711.713a2.375%2C2.375%2C0%2C0%2C0-1.091%2C0l-.711-.712a.377.377%2C0%2C0%2C0-.533.533l.492.472A2.336%2C2.336%2C0%2C0%2C0%2C16.678%2C16.869Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.2%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-json-validation:before,
.bz-ab:before{
  content:"üÜé";
}
.bz-setting:before{
  content:"üõ†";
  font-size:17px;
}
.bz-search:before{
  content:"üîé";
}
.bz-warning:before{
  content:"‚ö†Ô∏è"
}
.bz-bug:before{
  content:"üêû";
}
.bz-camera:before{
  content:"üì∑";
}
.bz-init:before{
  content:"‚û†";
}
.bz-declare:before{
  content:"üì¢";
  font-size: 13px;
}
.bz-timer:before,
.bz-timer2:before{
  content:"‚è±";
}
.bz-flag:before{
  content:"üö©";
}
.bz-join:before{
  content:"üë¨üèª";
  margin:5px;
}
.bz-leave:before{
  content:"üèÉüèª";
  margin:5px;
}
.bz-a-z:before{
  content:"‚Üì";
}
.bz-z-a:before{
  content:"‚Üë"
}
.bz-failed-hash:before{
  content:"‚ùå";
  margin-right: 5px;
}
.bz-failed-hash{
  margin:15px 25px;
  border:1px solid;
  border-radius:5px;
  padding:5px;
}
.bz-module { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2022.437%2022.412%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%2C%20.cls-3%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20opacity%3A%200.15%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%280%2C0%2C0%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%2C%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-linecap%3A%20round%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22hdr-module%22%20transform%3D%22translate%28-1.475%20-0.921%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_337%22%20data-name%3D%22Path%20337%22%20class%3D%22cls-1%22%20d%3D%22M12.25%2C1.75l11%2C5.01L13.188%2C11.792%2C2.438%2C6.562Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_338%22%20data-name%3D%22Path%20338%22%20class%3D%22cls-2%22%20d%3D%22M13.271%2C22.8l9.979-5V6.76l-9.979%2C5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_339%22%20data-name%3D%22Path%20339%22%20class%3D%22cls-3%22%20d%3D%22M13.188%2C22.833l-11.042-5V6.792l11.042%2C5Z%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_82%22%20data-name%3D%22Line%2082%22%20class%3D%22cls-3%22%20x2%3D%225.063%22%20y2%3D%222.293%22%20transform%3D%22translate%285.125%2011.478%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_83%22%20data-name%3D%22Line%2083%22%20class%3D%22cls-3%22%20x1%3D%222.875%22%20y1%3D%221.293%22%20transform%3D%22translate%285.125%2014.062%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_84%22%20data-name%3D%22Line%2084%22%20class%3D%22cls-3%22%20x1%3D%2211.041%22%20y1%3D%225%22%20transform%3D%22translate%2812.209%201.583%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_85%22%20data-name%3D%22Line%2085%22%20class%3D%22cls-3%22%20x1%3D%2211.041%22%20y1%3D%225%22%20transform%3D%22translate%287.49%204.021%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_86%22%20data-name%3D%22Line%2086%22%20class%3D%22cls-3%22%20y1%3D%225%22%20x2%3D%229.979%22%20transform%3D%22translate%282.146%201.615%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-scenario { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024.057%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%2C%20.cls-3%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-2%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0.5%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke%3A%20rgba%28112%2C112%2C112%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22hdr-scenario%22%20transform%3D%22translate%28-355%20-756.5%29%22%3E%20%20%20%20%3Cg%20id%3D%22hdr-scenario-2%22%20data-name%3D%22hdr-scenario%22%20transform%3D%22translate%28357%20757%29%22%3E%20%20%20%20%20%20%3Cpath%20id%3D%22Path_416%22%20data-name%3D%22Path%20416%22%20class%3D%22cls-1%22%20d%3D%22M10.106%2C0A10.133%2C10.133%2C0%2C0%2C0%2C8.177%2C20.075v2.9c6.048-.914%2C11.4-5.729%2C11.8-12.049A10.5%2C10.5%2C0%2C0%2C0%2C15.14%2C1.354c-.183-.108-.368-.215-.559-.309s-.395-.19-.6-.271C13.918.747%2C13.855.722%2C13.79.7c-.177-.066-.357-.14-.54-.193A10%2C10%2C0%2C0%2C0%2C10.106%2C0Z%22%2F%3E%20%20%20%20%20%20%3Cpath%20id%3D%22Path_417%22%20data-name%3D%22Path%20417%22%20class%3D%22cls-2%22%20d%3D%22M12.2%2C3.745a1.1%2C1.1%2C0%2C0%2C0-.966.388%2C4.507%2C4.507%2C0%2C0%2C0-.425.736%2C2.384%2C2.384%2C0%2C0%2C0%2C.309%2C2.481%2C2.722%2C2.722%2C0%2C0%2C0%2C1.971-1.608%2C1.96%2C1.96%2C0%2C0%2C0%2C.193-.814A1.158%2C1.158%2C0%2C0%2C0%2C12.2%2C3.745ZM7.7%2C3.8A1.182%2C1.182%2C0%2C0%2C0%2C6.6%2C4.927a1.96%2C1.96%2C0%2C0%2C0%2C.193.814A2.812%2C2.812%2C0%2C0%2C0%2C8.818%2C7.349%2C2.577%2C2.577%2C0%2C0%2C0%2C8.644%2C4.19%2C1.085%2C1.085%2C0%2C0%2C0%2C7.7%2C3.8ZM4.663%2C6.787a1.068%2C1.068%2C0%2C0%2C0-.6%2C1.919%2C4.646%2C4.646%2C0%2C0%2C0%2C.734.446A2.778%2C2.778%2C0%2C0%2C0%2C7.407%2C8.9%2C2.866%2C2.866%2C0%2C0%2C0%2C5.726%2C6.981a2.207%2C2.207%2C0%2C0%2C0-.87-.194%2C1.123%2C1.123%2C0%2C0%2C0-.193%2C0Zm9.528%2C3.76a2.823%2C2.823%2C0%2C0%2C0-1.6.465%2C2.866%2C2.866%2C0%2C0%2C0%2C1.681%2C1.919%2C2.208%2C2.208%2C0%2C0%2C0%2C.87.194%2C1.091%2C1.091%2C0%2C0%2C0%2C.792-1.938%2C4.488%2C4.488%2C0%2C0%2C0-.734-.426%2C2.665%2C2.665%2C0%2C0%2C0-1-.213ZM5.745%2C10.6a2.665%2C2.665%2C0%2C0%2C0-1%2C.213%2C2.113%2C2.113%2C0%2C0%2C0-.734.446%2C1.1%2C1.1%2C0%2C0%2C0%2C.85%2C1.919%2C1.991%2C1.991%2C0%2C0%2C0%2C.87-.194%2C2.614%2C2.614%2C0%2C0%2C0%2C1.6-1.919A2.762%2C2.762%2C0%2C0%2C0%2C5.745%2C10.6Zm3.131%2C1.9A2.722%2C2.722%2C0%2C0%2C0%2C6.9%2C14.112a1.876%2C1.876%2C0%2C0%2C0-.193.795%2C1.15%2C1.15%2C0%2C0%2C0%2C1.991.814%2C4.507%2C4.507%2C0%2C0%2C0%2C.425-.736A2.551%2C2.551%2C0%2C0%2C0%2C8.876%2C12.5Zm2.3.058a2.577%2C2.577%2C0%2C0%2C0%2C.174%2C3.159%2C1.206%2C1.206%2C0%2C0%2C0%2C2.049-.736%2C1.96%2C1.96%2C0%2C0%2C0-.193-.814%2C2.812%2C2.812%2C0%2C0%2C0-2.029-1.608Z%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%20%20%3Cline%20id%3D%22Line_112%22%20data-name%3D%22Line%20112%22%20class%3D%22cls-3%22%20y2%3D%2222%22%20transform%3D%22translate%28355.5%20757.5%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_113%22%20data-name%3D%22Line%20113%22%20class%3D%22cls-3%22%20y2%3D%2222%22%20transform%3D%22translate%28378.5%20757.5%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-test { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2022.2%2021.992%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%2C%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-2%2C%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke-width%3A%201.2px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%2C%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke%3A%20rgba%28112%2C112%2C112%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-3%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22hdr-unit%22%20transform%3D%22translate%28-0.095%20-0.52%29%22%3E%20%20%20%20%3Cg%20id%3D%22Group_109%22%20data-name%3D%22Group%20109%22%20transform%3D%22translate%281.695%201.12%29%22%3E%20%20%20%20%20%20%3Cpath%20id%3D%22Path_309%22%20data-name%3D%22Path%20309%22%20class%3D%22cls-1%22%20d%3D%22M9.307%2C4.187a3.3%2C3.3%2C0%2C0%2C0%2C1.052%2C2.34H4.2V21.912h17V16.335a4.027%2C4.027%2C0%2C0%2C1-2.583.95%2C3.238%2C3.238%2C0%2C0%2C1-3.387-3.067%2C3.239%2C3.239%2C0%2C0%2C1%2C3.388-3.067%2C4.038%2C4.038%2C0%2C0%2C1%2C2.584.953V6.528H15.032a3.3%2C3.3%2C0%2C0%2C0%2C1.053-2.341A3.24%2C3.24%2C0%2C0%2C0%2C12.7%2C1.12%2C3.238%2C3.238%2C0%2C0%2C0%2C9.307%2C4.187Z%22%20transform%3D%22translate%28-2.695%20-1.12%29%22%2F%3E%20%20%20%20%20%20%3Cpath%20id%3D%22Path_459%22%20data-name%3D%22Path%20459%22%20class%3D%22cls-2%22%20d%3D%22M0%2C0V20.277%22%20transform%3D%22translate%280%200.5%29%22%2F%3E%20%20%20%20%20%20%3Cline%20id%3D%22Line_111%22%20data-name%3D%22Line%20111%22%20class%3D%22cls-3%22%20y2%3D%2220.277%22%20transform%3D%22translate%2820%200.5%29%22%2F%3E%20%20%20%20%20%20%3Cline%20id%3D%22Line_140%22%20data-name%3D%22Line%20140%22%20class%3D%22cls-3%22%20y2%3D%2221%22%20transform%3D%22translate%28-1%20-0.5%29%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }

.bz-validate { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2022.517%2022.209%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%280%2C0%2C0%2C0%29%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-linecap%3A%20round%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%20%20stroke-width%3A%201.6px%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22validate%22%20transform%3D%22translate%28-1.283%20-1.175%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_287%22%20data-name%3D%22Path%20287%22%20class%3D%22cls-1%22%20d%3D%22M23%2C1.975%2C9.861%2C18.9%2C4.808%2C13.85%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_288%22%20data-name%3D%22Path%20288%22%20class%3D%22cls-1%22%20d%3D%22M19.667%2C12v7.584a3%2C3%2C0%2C0%2C1-3%2C3H5.083a3%2C3%2C0%2C0%2C1-3-3V8a3%2C3%2C0%2C0%2C1%2C3-3H16.666%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-double,.bz-click,.bz-mousedown,.bz-mouseup,.bz-mouseover,.bz-mouseout { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2025.75%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.5px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%20%20stroke%3A%20rgba%2854%2C61%2C74%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22mouse%22%20transform%3D%22translate%28-560%20-342.75%29%22%3E%20%20%20%20%3Cpath%20id%3D%22mouse-2%22%20data-name%3D%22mouse%22%20class%3D%22cls-1%22%20d%3D%22M12.986%2C2.638V.486a.486.486%2C0%2C0%2C0-.972%2C0V2.638C8.1%2C2.8%2C5.689%2C4.869%2C5.689%2C8.135V19.811C5.689%2C23.157%2C8.108%2C25%2C12.5%2C25s6.811-1.843%2C6.811-5.189V8.135C19.311%2C4.869%2C16.9%2C2.8%2C12.986%2C2.638Zm5.353%2C5.5V11.6H12.986V3.606C14.911%2C3.695%2C18.339%2C4.38%2C18.339%2C8.135ZM12.014%2C3.606V11.6H6.663V8.135C6.663%2C4.38%2C10.09%2C3.695%2C12.014%2C3.606ZM12.5%2C24.027c-2.663%2C0-5.837-.732-5.837-4.217V12.568H18.338v7.243C18.339%2C23.3%2C15.163%2C24.027%2C12.5%2C24.027Z%22%20transform%3D%22translate%28559.311%20343%29%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_502%22%20data-name%3D%22Path%20502%22%20class%3D%22cls-2%22%20d%3D%22M0%2C0V25%22%20transform%3D%22translate%28560.5%20343.5%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_81%22%20data-name%3D%22Line%2081%22%20class%3D%22cls-2%22%20y2%3D%2225%22%20transform%3D%22translate%28583.5%20343.5%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-keyboard,.bz-typing { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224.5%22%20height%3D%2214.643%22%20viewBox%3D%220%200%2024.5%2014.643%22%3E%20%20%3Cg%20id%3D%22keyboard%22%20transform%3D%22translate%28-9.179%20-14.107%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_323%22%20data-name%3D%22Path%20323%22%20d%3D%22M16.5%2C25.714h9.9a.429.429%2C0%2C0%2C0%2C0-.857H16.5a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_324%22%20data-name%3D%22Path%20324%22%20d%3D%22M12.429%2C20.571H15a.429.429%2C0%2C0%2C0%2C0-.857H12.429a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_325%22%20data-name%3D%22Path%20325%22%20d%3D%22M17.571%2C20.571h2.571a.429.429%2C0%2C1%2C0%2C0-.857H17.571a.429.429%2C0%2C1%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_326%22%20data-name%3D%22Path%20326%22%20d%3D%22M22.714%2C20.571h2.571a.429.429%2C0%2C1%2C0%2C0-.857H22.714a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_327%22%20data-name%3D%22Path%20327%22%20d%3D%22M27.857%2C20.571h2.571a.429.429%2C0%2C1%2C0%2C0-.857H27.857a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_328%22%20data-name%3D%22Path%20328%22%20d%3D%22M12.429%2C23.143H15a.429.429%2C0%2C0%2C0%2C0-.857H12.429a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_329%22%20data-name%3D%22Path%20329%22%20d%3D%22M17.571%2C23.143h2.571a.429.429%2C0%2C0%2C0%2C0-.857H17.571a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_330%22%20data-name%3D%22Path%20330%22%20d%3D%22M22.714%2C23.143h2.571a.429.429%2C0%2C1%2C0%2C0-.857H22.714a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_331%22%20data-name%3D%22Path%20331%22%20d%3D%22M27.857%2C23.143h2.571a.429.429%2C0%2C0%2C0%2C0-.857H27.857a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_332%22%20data-name%3D%22Path%20332%22%20d%3D%22M12.429%2C18H15a.429.429%2C0%2C0%2C0%2C0-.857H12.429a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_333%22%20data-name%3D%22Path%20333%22%20d%3D%22M17.571%2C18h2.571a.429.429%2C0%2C0%2C0%2C0-.857H17.571a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_334%22%20data-name%3D%22Path%20334%22%20d%3D%22M22.714%2C18h2.571a.429.429%2C0%2C1%2C0%2C0-.857H22.714a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_335%22%20data-name%3D%22Path%20335%22%20d%3D%22M27.857%2C18h2.571a.429.429%2C0%2C0%2C0%2C0-.857H27.857a.429.429%2C0%2C0%2C0%2C0%2C.857Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_336%22%20data-name%3D%22Path%20336%22%20d%3D%22M9.429%2C24.643A3.841%2C3.841%2C0%2C0%2C0%2C13.286%2C28.5H29.571a3.841%2C3.841%2C0%2C0%2C0%2C3.857-3.857V18.214a3.841%2C3.841%2C0%2C0%2C0-3.857-3.857H13.286a3.841%2C3.841%2C0%2C0%2C0-3.857%2C3.857Zm.857-6.429a2.982%2C2.982%2C0%2C0%2C1%2C3-3H29.571a2.982%2C2.982%2C0%2C0%2C1%2C3%2C3v6.429a2.982%2C2.982%2C0%2C0%2C1-3%2C3H13.286a2.982%2C2.982%2C0%2C0%2C1-3-3Z%22%20fill%3D%22%23363d4a%22%20stroke%3D%22%23363d4a%22%20stroke-width%3D%220.5%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-call { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020.722%2023.606%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%2C%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0.7%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-2%2C%20.cls-3%2C%20.cls-4%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%201.3px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%2C%20.cls-3%2C%20.cls-4%20%7B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-3%2C%20.cls-4%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke-linecap%3A%20round%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22plug%22%20transform%3D%22translate%28-2.35%20-0.808%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_489%22%20data-name%3D%22Path%20489%22%20class%3D%22cls-1%22%20d%3D%22M0%2C0H5.627V5.625H0Z%22%20transform%3D%22translate%2816.795%201.458%29%22%2F%3E%20%20%20%20%3Crect%20id%3D%22Rectangle_68%22%20data-name%3D%22Rectangle%2068%22%20class%3D%22cls-2%22%20width%3D%225.627%22%20height%3D%225.625%22%20transform%3D%22translate%2816.795%2018.139%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_73%22%20data-name%3D%22Line%2073%22%20class%3D%22cls-3%22%20x2%3D%2210.312%22%20transform%3D%22translate%283%2012.375%29%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_294%22%20data-name%3D%22Path%20294%22%20class%3D%22cls-3%22%20d%3D%22M10.312%2C9.1l3.271%2C3.271-3.271%2C3.271%22%2F%3E%20%20%20%20%3Ccircle%20id%3D%22Ellipse_36%22%20data-name%3D%22Ellipse%2036%22%20class%3D%22cls-4%22%20cx%3D%222.813%22%20cy%3D%222.813%22%20r%3D%222.813%22%20transform%3D%22translate%2816.794%209.797%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_74%22%20data-name%3D%22Line%2074%22%20class%3D%22cls-3%22%20y2%3D%222.672%22%20transform%3D%22translate%2819.607%207.125%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_75%22%20data-name%3D%22Line%2075%22%20class%3D%22cls-3%22%20y2%3D%222.701%22%20transform%3D%22translate%2819.607%2015.424%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-extract { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2023.814%2023.984%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-3%2C%20.cls-4%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%20%20stroke-width%3A%201.3px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%2C%20.cls-3%2C%20.cls-4%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0.2%29%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-3%20%7B%20%20%20%20%20%20%20%20stroke-linecap%3A%20round%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22extract%22%20transform%3D%22translate%28-0.757%20-0.272%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_290%22%20data-name%3D%22Path%20290%22%20class%3D%22cls-1%22%20d%3D%22M23.007%2C2.066a3.122%2C3.122%2C0%2C0%2C0-4.415%2C0L8.94%2C11.718a7.368%2C7.368%2C0%2C0%2C0-1.876%2C4.611L5.2%2C18.2l1.679%2C1.68%2C1.867-1.867a7.368%2C7.368%2C0%2C0%2C0%2C4.612-1.876l9.651-9.652A3.12%2C3.12%2C0%2C0%2C0%2C23.007%2C2.066Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_291%22%20data-name%3D%22Path%20291%22%20class%3D%22cls-2%22%20d%3D%22M20.744%2C8.744l2.263-2.263a3.122%2C3.122%2C0%2C0%2C0-4.415-4.415L16.36%2C4.3%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_69%22%20data-name%3D%22Line%2069%22%20class%3D%22cls-3%22%20x2%3D%227.027%22%20y2%3D%227.027%22%20transform%3D%22translate%2815.074%202.972%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_70%22%20data-name%3D%22Line%2070%22%20class%3D%22cls-3%22%20x2%3D%221.635%22%20y2%3D%221.635%22%20transform%3D%22translate%2814.125%206.751%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_71%22%20data-name%3D%22Line%2071%22%20class%3D%22cls-3%22%20x2%3D%221.635%22%20y2%3D%221.636%22%20transform%3D%22translate%2812.179%208.634%29%22%2F%3E%20%20%20%20%3Cline%20id%3D%22Line_72%22%20data-name%3D%22Line%2072%22%20class%3D%22cls-3%22%20x2%3D%221.635%22%20y2%3D%221.635%22%20transform%3D%22translate%2810.296%2010.58%29%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_292%22%20data-name%3D%22Path%20292%22%20class%3D%22cls-4%22%20d%3D%22M3.692%2C23.235a1.27%2C1.27%2C0%2C1%2C1-1.8-1.8%2C9.651%2C9.651%2C0%2C0%2C1%2C2.8-1A9.624%2C9.624%2C0%2C0%2C1%2C3.692%2C23.235Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-script { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2017.041%2011.658%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.4px%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22js%22%20transform%3D%22translate%28-4.38%20-7.053%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_263%22%20data-name%3D%22Path%20263%22%20class%3D%22cls-1%22%20d%3D%22M6.945%2C18.4a2.744%2C2.744%2C0%2C0%2C1-2.017-1.23%2C2.777%2C2.777%2C0%2C0%2C1-.3-1.428l-.043-.98h1.3v.715c0%2C1.253.516%2C1.827%2C1.642%2C1.827a1.625%2C1.625%2C0%2C0%2C0%2C1.479-.741c.206-.354.217-.569.246-4.74l.031-4.37h1.381l-.033%2C4.423L10.6%2C16.3l-.3.61a2.331%2C2.331%2C0%2C0%2C1-1.405%2C1.282%2C5.61%2C5.61%2C0%2C0%2C1-1.95.21Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_264%22%20data-name%3D%22Path%20264%22%20class%3D%22cls-1%22%20d%3D%22M15.437%2C18.308A3.467%2C3.467%2C0%2C0%2C1%2C12.594%2C15.3l-.064-.538h.65c.576%2C0%2C.65.024.65.208a2.972%2C2.972%2C0%2C0%2C0%2C.828%2C1.7c1.186.983%2C4.1.776%2C4.783-.339a2.238%2C2.238%2C0%2C0%2C0%2C.054-1.786c-.241-.466-.994-.789-2.93-1.257-2.065-.5-2.451-.649-2.978-1.157a2.809%2C2.809%2C0%2C0%2C1%2C.264-3.9%2C3.333%2C3.333%2C0%2C0%2C1%2C2.468-.961c2.485-.132%2C4.1.9%2C4.358%2C2.773l.067.486H19.46l-.167-.575q-.482-1.659-2.927-1.525c-1.4.077-2.136.692-2.136%2C1.78%2C0%2C1.05.335%2C1.259%2C3.055%2C1.912%2C2%2C.479%2C2.537.7%2C3.069%2C1.246a3.052%2C3.052%2C0%2C0%2C1%2C.036%2C3.761c-.875%2C1.058-3.092%2C1.588-4.953%2C1.184Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-refresh { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024.297%2019.416%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-2%20%7B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-linecap%3A%20round%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%20%20stroke-width%3A%201.5px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%28161%2C168%2C171%2C0.51%29%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22refresh%22%20transform%3D%22translate%28-0.25%20-2.75%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_493%22%20data-name%3D%22Path%20493%22%20class%3D%22cls-1%22%20d%3D%22M3.5%2C12.458a8.96%2C8.96%2C0%2C0%2C1%2C17.074-3.8%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_494%22%20data-name%3D%22Path%20494%22%20class%3D%22cls-1%22%20d%3D%22M21.416%2C12.458A8.959%2C8.959%2C0%2C0%2C1%2C4.278%2C16.113%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_495%22%20data-name%3D%22Path%20495%22%20class%3D%22cls-1%22%20d%3D%22M18.782%2C14l2.508-2.507L23.8%2C14%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_496%22%20data-name%3D%22Path%20496%22%20class%3D%22cls-1%22%20d%3D%22M6.015%2C11%2C3.507%2C13.507%2C1%2C11%22%2F%3E%20%20%20%20%3Ccircle%20id%3D%22Ellipse_60%22%20data-name%3D%22Ellipse%2060%22%20class%3D%22cls-2%22%20cx%3D%222.083%22%20cy%3D%222.083%22%20r%3D%222.083%22%20transform%3D%22translate%2810.417%2010.334%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-group { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2021%2019.8%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0.99%29%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cpath%20id%3D%22group%22%20class%3D%22cls-1%22%20d%3D%22M31%2C29.9l-4.778-3.465V28.25H25.75c-2.074%2C0-3.1-1.254-4.384-2.838-1.417-1.782-3.019-3.762-6.116-3.762h-.341A2.589%2C2.589%2C0%2C0%2C0%2C12.625%2C20C11.181%2C20%2C10%2C21.485%2C10%2C23.3s1.181%2C3.3%2C2.625%2C3.3a2.618%2C2.618%2C0%2C0%2C0%2C2.284-1.65h.341c2.021%2C0%2C3.019%2C1.254%2C4.279%2C2.805a16.434%2C16.434%2C0%2C0%2C0%2C1.995%2C2.178%2C18.62%2C18.62%2C0%2C0%2C0-1.89%2C2.079c-1.286%2C1.584-2.31%2C2.838-4.384%2C2.838h-.341a2.589%2C2.589%2C0%2C0%2C0-2.284-1.65C11.181%2C33.2%2C10%2C34.685%2C10%2C36.5s1.181%2C3.3%2C2.625%2C3.3a2.618%2C2.618%2C0%2C0%2C0%2C2.284-1.65h.341c3.15%2C0%2C4.856-2.112%2C6.221-3.8%2C1.26-1.551%2C2.257-2.8%2C4.279-2.8h.473s-1.194%2C2.228%2C0%2C1.815S31%2C29.9%2C31%2C29.9ZM12.625%2C25.28A1.818%2C1.818%2C0%2C0%2C1%2C11.05%2C23.3a1.818%2C1.818%2C0%2C0%2C1%2C1.575-1.98A1.818%2C1.818%2C0%2C0%2C1%2C14.2%2C23.3%2C1.818%2C1.818%2C0%2C0%2C1%2C12.625%2C25.28Zm0%2C13.2a2.032%2C2.032%2C0%2C0%2C1%2C0-3.96%2C2.032%2C2.032%2C0%2C0%2C1%2C0%2C3.96Z%22%20transform%3D%22translate%28-10%20-20%29%22%2F%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-api { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020.99%2019.761%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.7px%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22hdr-api%22%20transform%3D%22translate%28-19.505%20-21.409%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_449%22%20data-name%3D%22Path%20449%22%20class%3D%22cls-1%22%20d%3D%22M36.861%2C25.491l-1.566%2C1.567c-.786.786%2C0%2C2.352%2C0%2C2.352L40%2C24.709%2C35.295%2C20s-.783%2C1.566%2C0%2C2.353l1.566%2C1.566.108.108H20v1.356H36.969Z%22%20transform%3D%22translate%280%202%29%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_450%22%20data-name%3D%22Path%20450%22%20class%3D%22cls-1%22%20d%3D%22M23.139%2C35.091%2C24.7%2C33.525c.786-.786%2C0-2.352%2C0-2.352l-4.7%2C4.7%2C4.7%2C4.7s.783-1.566%2C0-2.352l-1.566-1.566-.108-.109H40V35.2H23.031Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-hash-title{
  font-weight:bold;
}
.bz-hash-msg{
  font-size:13px;
  display:unset !important;
}
.bz-hash-msg.bz-line{
  margin-left:0 !important;
  margin-right:5px;
}
.bz-hash-val{
  line-height:40px;
  width:50px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  border-left:1px solid #CCC;
}
fieldset{
  border:1px solid rgb(118,118,118);
  border-radius:5px;
}
.bz-search-content{
  cursor:pointer;
}
.bz-search-content:hover{
  text-decoration:underline;
}
.bz-clickable:hover{
  cursor:pointer;
  text-decoration:underline;
}
.bz-success:before{
  content:"‚úîÔ∏è";
  font-size: 10px;
}

.bz-play-btn:before,
.bz-play:before{
  content:"‚ñ∂";
}
.bz-play-btn:before{
  margin-right:5px;
  color:#FFF;
}
.bz-play:before{
  font-size:18px;
  color:#18cd61;
}
.bz-play:disabled:before{
  /** content:"‚ñ∑"; **/
  color:#999;
}
.bz-failed:before{
  content:"‚ùå";
  font-size: 10px;
  color: green;
}

.bz-cross:before{
  content:"‚úñ";
  color: #000;
  font-size: 9px;
  position: relative;
  top: -3px;
}
.bz-reset { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016.6%2021.024%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%2854%2C61%2C74%2C0.99%29%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.6px%3B%20%20%20%20%20%20%20%20fill-rule%3A%20evenodd%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22reset%22%20transform%3D%22translate%28-3.7%20-3.7%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_456%22%20data-name%3D%22Path%20456%22%20class%3D%22cls-1%22%20d%3D%22M4%2C12v1H6V12a6%2C6%2C0%2C1%2C1%2C6%2C6H11V14L6%2C19l5%2C5V20h1a8%2C8%2C0%2C1%2C0-8-8Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-running {background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTIwcHgnIGhlaWdodD0nMTIwcHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiBjbGFzcz0idWlsLWRlZmF1bHQiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJub25lIiBjbGFzcz0iYmsiPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMzRTY1RkYnIHRyYW5zZm9ybT0ncm90YXRlKDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPScwcycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjM0U2NUZGJyB0cmFuc2Zvcm09J3JvdGF0ZSgzMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49JzAuMDgzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMzRTY1RkYnIHRyYW5zZm9ybT0ncm90YXRlKDYwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nMC4xNjY2NjY2NjY2NjY2NjY2NnMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzNFNjVGRicgdHJhbnNmb3JtPSdyb3RhdGUoOTAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPScwLjI1cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjM0U2NUZGJyB0cmFuc2Zvcm09J3JvdGF0ZSgxMjAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPScwLjMzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMzRTY1RkYnIHRyYW5zZm9ybT0ncm90YXRlKDE1MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49JzAuNDE2NjY2NjY2NjY2NjY2N3MnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzNFNjVGRicgdHJhbnNmb3JtPSdyb3RhdGUoMTgwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nMC41cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjM0U2NUZGJyB0cmFuc2Zvcm09J3JvdGF0ZSgyMTAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPScwLjU4MzMzMzMzMzMzMzMzMzRzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyMzRTY1RkYnIHRyYW5zZm9ybT0ncm90YXRlKDI0MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49JzAuNjY2NjY2NjY2NjY2NjY2NnMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzNFNjVGRicgdHJhbnNmb3JtPSdyb3RhdGUoMjcwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nMC43NXMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nIzNFNjVGRicgdHJhbnNmb3JtPSdyb3RhdGUoMzAwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nMC44MzMzMzMzMzMzMzMzMzM0cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjM0U2NUZGJyB0cmFuc2Zvcm09J3JvdGF0ZSgzMzAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPScwLjkxNjY2NjY2NjY2NjY2NjZzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48L3N2Zz4=);}
.bz-flash { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20id%3D%22flash%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2214.61%22%20height%3D%2220%22%20viewBox%3D%220%200%2014.61%2020%22%3E%20%20%3Cpath%20id%3D%22Path_564%22%20data-name%3D%22Path%20564%22%20d%3D%22M2.979%2C9.078%2C14.61%2C0%2C8.794%2C8.369l3.262%2C2.837L0%2C20l6.383-8.369Z%22%20fill%3D%22%23363d4a%22%2F%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }

.bz-play { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2023.5%2022%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20rgba%280%2C204%2C102%2C0.5%29%3B%20%20%20%20%20%20%20%20stroke%3A%20%230c6%3B%20%20%20%20%20%20%20%20stroke-linejoin%3A%20round%3B%20%20%20%20%20%20%20%20stroke-miterlimit%3A%2010%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-1%2C%20.cls-2%20%7B%20%20%20%20%20%20%20%20stroke-width%3A%202px%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20none%3B%20%20%20%20%20%20%20%20stroke%3A%20rgba%28112%2C112%2C112%2C0%29%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22play%22%20transform%3D%22translate%28-136%20-79%29%22%3E%20%20%20%20%3Cpath%20id%3D%22play-2%22%20data-name%3D%22play%22%20class%3D%22cls-1%22%20d%3D%22M3.894.969l21.5%2C10-21.5%2C10Z%22%20transform%3D%22translate%28133.106%2079.031%29%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_146%22%20data-name%3D%22Path%20146%22%20class%3D%22cls-2%22%20d%3D%22M0-1V19%22%20transform%3D%22translate%28158.5%2081.5%29%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-broken { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2020.077%2020.259%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20stroke-width%3A%200.2px%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22broken%22%20transform%3D%22translate%2823.577%20-2.258%29%20rotate%2890%29%22%3E%20%20%20%20%3Cpath%20id%3D%22Path_521%22%20data-name%3D%22Path%20521%22%20class%3D%22cls-1%22%20d%3D%22M12.692%2C12.312a.374.374%2C0%2C0%2C0-.113-.267l-.79-.781a3.531%2C3.531%2C0%2C0%2C0-.708-4L8.4%2C4.616A3.5%2C3.5%2C0%2C0%2C0%2C5.922%2C3.6H5.9A3.524%2C3.524%2C0%2C0%2C0%2C3.443%2C9.632l2.676%2C2.644a3.526%2C3.526%2C0%2C0%2C0%2C4.01.665l.785.775a.384.384%2C0%2C0%2C0%2C.268.109.378.378%2C0%2C0%2C0%2C.267-.111l1.13-1.132A.379.379%2C0%2C0%2C0%2C12.692%2C12.312ZM7.932%2C10.77l.157.154a1.228%2C1.228%2C0%2C0%2C1-.383-.257L5.032%2C8.026A1.266%2C1.266%2C0%2C0%2C1%2C5.587%2C5.9a1.288%2C1.288%2C0%2C0%2C1%2C.326-.045h0a1.252%2C1.252%2C0%2C0%2C1%2C.89.366L9.485%2C8.866a1.261%2C1.261%2C0%2C0%2C1%2C.261.381l-.162-.156a1.178%2C1.178%2C0%2C0%2C0-.828-.34h0a1.181%2C1.181%2C0%2C0%2C0-1.008%2C1.78%2C1.168%2C1.168%2C0%2C0%2C0%2C.187.239Zm-1.283.967L3.975%2C9.1A2.768%2C2.768%2C0%2C0%2C1%2C5.9%2C4.357h.017a2.747%2C2.747%2C0%2C0%2C1%2C1.956.8L10.542%2C7.8a2.778%2C2.778%2C0%2C0%2C1%2C.665%2C2.892l-.614-.605a2.036%2C2.036%2C0%2C0%2C0-.581-1.757L7.342%2C5.686A2.023%2C2.023%2C0%2C0%2C0%2C4.5%2C8.565l2.676%2C2.642a2.025%2C2.025%2C0%2C0%2C0%2C1.767.554l.614.605a2.764%2C2.764%2C0%2C0%2C1-2.9-.629Zm4.528%2C1.177-.714-.706h0L9.319%2C11.076h0l-.856-.845a.427.427%2C0%2C0%2C1%2C0-.6.415.415%2C0%2C0%2C1%2C.3-.126h0a.417.417%2C0%2C0%2C1%2C.3.122l.856.856h0L11.058%2C11.6h0l.718.71Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_522%22%20data-name%3D%22Path%20522%22%20class%3D%22cls-1%22%20d%3D%22M21.349%2C17.418l-2.683-2.643a3.52%2C3.52%2C0%2C0%2C0-4.036-.653l-.794-.783a.378.378%2C0%2C0%2C0-.532%2C0L12.17%2C14.473a.377.377%2C0%2C0%2C0%2C0%2C.537l.813.8a3.536%2C3.536%2C0%2C0%2C0%2C.725%2C3.979l2.678%2C2.644a3.529%2C3.529%2C0%2C0%2C0%2C4.963-5.017Zm-7.776-3.277.717.717h0l1.14%2C1.125h0l.892.881a.417.417%2C0%2C0%2C1%2C.133.3.427.427%2C0%2C0%2C1-.65.355.44.44%2C0%2C0%2C1-.069-.051l-2.762-2.728Zm3.284%2C2.184-.227-.233a1.3%2C1.3%2C0%2C0%2C1%2C.441.291l2.674%2C2.642a1.267%2C1.267%2C0%2C0%2C1-.556%2C2.122%2C1.282%2C1.282%2C0%2C0%2C1-.326.045h0a1.259%2C1.259%2C0%2C0%2C1-.888-.366L15.3%2C18.184a1.237%2C1.237%2C0%2C0%2C1-.213-.308l.128.129a1.181%2C1.181%2C0%2C0%2C0%2C1.643-1.68Zm3.976%2C5.543a2.78%2C2.78%2C0%2C0%2C1-3.914.023l-2.676-2.637a2.781%2C2.781%2C0%2C0%2C1-.674-2.864l.244.241.374.37a2.037%2C2.037%2C0%2C0%2C0%2C.58%2C1.712l2.676%2C2.652a2.008%2C2.008%2C0%2C0%2C0%2C1.42.584h.013A2.023%2C2.023%2C0%2C0%2C0%2C20.6%2C18.9a2%2C2%2C0%2C0%2C0-.321-.412L17.61%2C15.844a2.021%2C2.021%2C0%2C0%2C0-1.793-.55l-.357-.353-.252-.248a2.764%2C2.764%2C0%2C0%2C1%2C2.932.621l2.67%2C2.641A2.782%2C2.782%2C0%2C0%2C1%2C20.833%2C21.868Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_523%22%20data-name%3D%22Path%20523%22%20class%3D%22cls-1%22%20d%3D%22M16.119%2C12.1a.377.377%2C0%2C0%2C0%2C.355.248.386.386%2C0%2C0%2C0%2C.13-.022l1.4-.513a.379.379%2C0%2C0%2C0-.259-.712l-1.4.511A.376.376%2C0%2C0%2C0%2C16.119%2C12.1Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_524%22%20data-name%3D%22Path%20524%22%20class%3D%22cls-1%22%20d%3D%22M15.524%2C10.815a.377.377%2C0%2C0%2C0%2C.263-.111l1.07-1.057a.379.379%2C0%2C0%2C0-.535-.537l-1.065%2C1.057a.38.38%2C0%2C0%2C0%2C0%2C.537A.386.386%2C0%2C0%2C0%2C15.524%2C10.815Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_525%22%20data-name%3D%22Path%20525%22%20class%3D%22cls-1%22%20d%3D%22M13.817%2C9.8a.416.416%2C0%2C0%2C0%2C.131.024.38.38%2C0%2C0%2C0%2C.355-.251l.511-1.394a.379.379%2C0%2C1%2C0-.712-.259l-.512%2C1.4A.379.379%2C0%2C0%2C0%2C13.817%2C9.8Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_526%22%20data-name%3D%22Path%20526%22%20class%3D%22cls-1%22%20d%3D%22M10.923%2C17.294a.38.38%2C0%2C0%2C0-.484.227l-.511%2C1.405a.377.377%2C0%2C0%2C0%2C.214.484.345.345%2C0%2C0%2C0%2C.131.023.375.375%2C0%2C0%2C0%2C.355-.248l.511-1.4A.379.379%2C0%2C0%2C0%2C10.923%2C17.294Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_527%22%20data-name%3D%22Path%20527%22%20class%3D%22cls-1%22%20d%3D%22M8.991%2C16.432%2C7.935%2C17.489a.378.378%2C0%2C0%2C0%2C.18.63.358.358%2C0%2C0%2C0%2C.354-.1l1.057-1.056a.379.379%2C0%2C1%2C0-.535-.537Z%22%2F%3E%20%20%20%20%3Cpath%20id%3D%22Path_528%22%20data-name%3D%22Path%20528%22%20class%3D%22cls-1%22%20d%3D%22M8.623%2C14.995a.377.377%2C0%2C0%2C0-.485-.227l-1.406.511a.379.379%2C0%2C0%2C0%2C.131.734.33.33%2C0%2C0%2C0%2C.128-.023L8.4%2C15.478A.378.378%2C0%2C0%2C0%2C8.623%2C14.995Z%22%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }
.bz-link { background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2021%2021%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23fff%3B%20%20%20%20%20%20%20%20stroke%3A%20%23363d4a%3B%20%20%20%20%20%20%20%20fill-rule%3A%20evenodd%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cpath%20id%3D%22link%22%20class%3D%22cls-1%22%20d%3D%22M14.622%2C0a5.368%2C5.368%2C0%2C0%2C0-3.8%2C1.57h-.005L7.338%2C5.046a5.414%2C5.414%2C0%2C0%2C0-.521.609%2C5.889%2C5.889%2C0%2C0%2C1%2C4.03-.017l2.016-2.02h.005a2.505%2C2.505%2C0%2C0%2C1%2C3.509%2C0%2C2.505%2C2.505%2C0%2C0%2C1%2C0%2C3.514h0L12.9%2C10.609v.005A2.506%2C2.506%2C0%2C0%2C1%2C9.392%2C10.6a2.439%2C2.439%2C0%2C0%2C1-.706-1.445%2C2.071%2C2.071%2C0%2C0%2C0-.609.141%2C2.03%2C2.03%2C0%2C0%2C0-.538.332l-.1.1L6.2%2C10.972a5.384%2C5.384%2C0%2C0%2C0%2C8.75%2C1.679l.006.005L18.43%2C9.18l-.005-.006A5.367%2C5.367%2C0%2C0%2C0%2C14.623%2C0ZM8.854%2C5.763a5.362%2C5.362%2C0%2C0%2C0-3.8%2C1.57H5.046L1.57%2C10.81a5.383%2C5.383%2C0%2C0%2C0%2C7.61%2C7.615h.005l3.471-3.476a5%2C5%2C0%2C0%2C0%2C.521-.6%2C5.838%2C5.838%2C0%2C0%2C1-3.97.032l-.055-.016-2.02%2C2.01v.005a2.483%2C2.483%2C0%2C0%2C1-3.509-3.514L7.094%2C9.386H7.1a2.479%2C2.479%2C0%2C0%2C1%2C4.215%2C1.451%2C2.088%2C2.088%2C0%2C0%2C0%2C.608-.147%2C1.876%2C1.876%2C0%2C0%2C0%2C.544-.337l.092-.092L13.8%2C9.017A5.39%2C5.39%2C0%2C0%2C0%2C8.853%2C5.763Z%22%20transform%3D%22translate%280.5%200.5%29%22%2F%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }

.bz-switch{ background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%227.414%22%20height%3D%2212.828%22%20viewBox%3D%220%200%207.414%2012.828%22%3E%20%20%3Cpath%20id%3D%22caret-right%22%20d%3D%22M18.5%2C11.5l-5%2C5-5-5%22%20transform%3D%22translate%28-10.086%2019.914%29%20rotate%28-90%29%22%20fill%3D%22none%22%20stroke%3D%22%23363d4a%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%222%22%2F%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }

.bz-plus{ background-image: url('data:image/svg+xml;charset%3DUS-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%20%20%3Cdefs%3E%20%20%20%20%3Cstyle%3E%20%20%20%20%20%20.cls-1%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23363d4a%3B%20%20%20%20%20%20%7D%20%20%20%20%20%20.cls-2%20%7B%20%20%20%20%20%20%20%20fill%3A%20%23fff%3B%20%20%20%20%20%20%7D%20%20%20%20%3C%2Fstyle%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20id%3D%22plus-black%22%20transform%3D%22translate%28-140%20-278.057%29%22%3E%20%20%20%20%3Cg%20id%3D%22plus-blue%22%20transform%3D%22translate%28-23%20-63.387%29%22%3E%20%20%20%20%20%20%3Ccircle%20id%3D%22Ellipse_2%22%20data-name%3D%22Ellipse%202%22%20class%3D%22cls-1%22%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%2212%22%20transform%3D%22translate%28163%20341.443%29%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%20%20%3Cg%20id%3D%22plus-gray%22%20transform%3D%22translate%28145%20283%29%22%3E%20%20%20%20%20%20%3Cpath%20id%3D%22Path_102%22%20data-name%3D%22Path%20102%22%20class%3D%22cls-2%22%20d%3D%22M13.563%2C5.262H8.75V.439A.438.438%2C0%2C0%2C0%2C8.313%2C0H5.688A.438.438%2C0%2C0%2C0%2C5.25.439V5.262H.438A.438.438%2C0%2C0%2C0%2C0%2C5.7V8.332a.438.438%2C0%2C0%2C0%2C.438.439H5.25v4.824a.438.438%2C0%2C0%2C0%2C.438.439H8.313a.438.438%2C0%2C0%2C0%2C.437-.439V8.77h4.813A.438.438%2C0%2C0%2C0%2C14%2C8.332V5.7A.438.438%2C0%2C0%2C0%2C13.563%2C5.262Z%22%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E')!important; background-repeat: no-repeat; }

.bz-scope:before{
  content:attr(bz-name);
  margin: 10px;
  font-weight: bold;
  font-size: 15px;
  line-height: 30px;
}
.bz-highlight-msg{
  color:#009;
  font-weight:bold;
}

#project-init{
  position: sticky;
  top: 35px;
  background-color: #FFF;
  z-index: 1;
}
button:hover{
  background-color:#CCC;
}
button:disabled{
  opacity:0.4;
  cursor:not-allowed !important;
}
.bz-log-box{
  background-color: #f3f7f9;
  padding: 2px;border-radius: 5px;
}

.bz-loading-info .bz-running{
  height: 40px;
  width: 40px;
  background-size: 40px;
}

.bz-open.bz-switch{
  transform:rotate(90deg)
}
.bz-content{
  padding: 1px 0 1px 0;
  background-color:#f3f7f9;
  display:flex;
  flex-direction: column;
}
.bz-row{
  display:flex;
  /** color: blue; */
}

.bz-highlight-row{
  color:#009;
}
.bz-light-row{
  color:#333;
}

.bz-title{
  display: flex;
  color:#363D4A;
  border-radius: 5px;
  line-height: 30px;
  width:calc(100% - 4px);
  margin:0 2px;
  background-color:#FFF;
}
.bz-success-title{
  background-color:#EFE;
}
.bz-failed-title{
  background-color:#FDD;
}

.bz-level-action .bz-success-title{
  background-color:#FFF;
}

.bz-panel{
  display: flex;
  flex-direction: column;
  margin: 2px 0px 0px 2px;
  background-color: #f3f7f9;
  padding: 0px 0 10px 28px;
  width: calc(100% - 2px);
}
.bz-nowrap{
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.bz-title-text{
  flex:1;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  margin-left: 5px;
}
.bz-line.bz-title-text:hover,
.bz-title .bz-title-text:hover{
  text-decoration:underline;
}
.bz-remote-title{
  color:#000;
}
.bz-header .bz-timer:before{
  position: relative;
  margin-right:5px;
}
.bz-header .bz-timer{
  flex: 1;
  position: relative;
  font-size: 20px;
  font-weight: bold;
  top: 6px;
  margin: 2px 15px 5px 5px;
  white-space: nowrap;
  color: #363D4A;
}
.bz-details{
  display: flex;
  flex-direction: column;
}
body>.bz-log-box .bz-header .bz-timer{
  top: -1px;
}


.bz-header .bz-info-box{
  position: relative;
  top: 8px;
}
.bz-info-box>div>*{
  white-space:nowrap;
}

.bz-info-box>div>span{
  font-weight:bold;
  margin:5px 15px 5px 0px;
}
.bz-complete:after{
  content:"üö©";
  font-size:20px;
  margin-left:20px;
}

.bz-time{
  width: 50px;
  white-space:nowrap;
}
.bz-wait{
  color:#999;
}
.bz-small-icon,
.bz-icon{
  font-size: 13px;
  border: 0;
  background-color: transparent;
  margin: 0 10px;
  background-position: center;
  width: 16px;
  background-repeat: no-repeat;
  background-size: 16px;
}
.bz-icon-letter{
  border:0;
  background-color: transparent;
}
button.bz-icon-txt{
  width:unset;
  white-space:nowrap;
  background-size: 16px;
  padding-left: 28px;
  background-position: 5px;
}
.bz-small-icon.bz-switch{
  background-size: 7px !important;
  position: relative;
  top: 2px;
  margin-right: 0 !important;
  margin-left: 5px;  
}

.bz-icon-txt{
  padding-left:30px;
  background-size:12px;
  margin-right:30px;
}
.bz-switch{
  background-size:unset;
  margin-right:6px;
}
.bz-running{
  background-size: 20px
}
.bz-panel>div{
  line-height:20px;
  white-space: pre-wrap;
  word-break: break-word;
}

.bz-panel>div:hover{
  /** background-color:#cce1ff; **/
}

.bz-line:hover,
.bz-row:hover,
.bz-title:hover{
  background-color:#cce1ff;
}
.bz-content:hover{
  background-color:#f3f7f9;
}

.bz-ctrl-box{
  width:300px;
  display:flex;
  flex-flow: wrap-reverse;
}
.bz-ctrl-box button{
  width:30px;
  white-space: nowrap;
  text-align: center;
  margin:0 10px;
  color: #363D4A;
}
.bz-ctrl-box .bz-declare,.bz-ctrl-box .bz-init{
  width:80px;
}

.bz-test-ctrl{
  width:75px;
}
.bz-test-ctrl button{
  text-align:right;
}
button{
  cursor:pointer;
}
.bz-line{
  line-height:25px;
  margin-left:10px;
  width: calc(100% - 15px);
}

.bz-header{
  border-radius: 5px;
  height: 35px;
  z-index:200000000000;
  background-color:#EEE;
  top:0;
  position:sticky;
}
.bz-header *{
  white-space:nowrap;
}
.bz-header input[type=text]{
  border-radius: 5px;
  border: 1px solid #999;
  height:28px;
  width: 300px;
  padding: 3px 6px;
  margin: 3px 0 0 2px;
}
body>.bz-log-box .bz-header input[type=text]{
  height:20px;
}
.bz-search-highlight{
  background-color:yellow;
  font-weight:bold;
}

.bz-scope{
  counter-reset: line;
}
.bz-log-box>div>.bz-content:before{
  counter-increment: line;
  content: counter(line);
  position: absolute;
  margin-top: 6px;
  margin-left: 15px;
}
.bz-log-box>.bz-scope>.bz-content>.bz-title{
  padding-left:30px;
}
.bz-panel.project-init{
  max-height:300px;
  overflow:auto;
}
body>.bz-log-box>.bz-scope .bz-content>.bz-panel{
  width:calc(100% - 12px);
}
body>.bz-log-box>.bz-scope>.bz-content>.bz-title{
  width:calc(100% - 34px);
}
.bz-log-bar,
.bz-sort-bar{
  margin: 0 10px 0 2px;
  border: 1px solid #999;
  border-radius: 5px;
  height: 28px;
  position: relative;
  top: 3px;
  background-color:#FFF;
  padding:0 5px;
}

body>.bz-log-box .bz-log-bar,
body>.bz-log-box .bz-sort-bar{
  height:26px;
}
.bz-log-bar *{
  color:#000;
  margin:0 2px;
  position:relative;
  top:5px;
}

.bz-chk-replay{
  display:none;
  margin:9px 10px 0 0 !important;
}

.bz-log-bar a{
  cursor:pointer;
  text-decoration:underline;
}

.bz-disable-icon{
  cursor:not-allowed;
  opacity:0.5;
}
.bz-disable-worker-log a{
  color:#999;
  text-decoration:line-through;
  cursor:not-allowed;
}

.bz-disable-worker-log .bz-master-log{
  color:#000;
  text-decoration:underline;
  cursor:pointer;
}

.bz-sort-bar button{
  margin: 4px 2px;
  width: unset;
}
.bz-sort-bar span{
  position: relative;
  top: -1px;
}
.bz-pop-panel{
  position: absolute;
  margin-top: 30px;
  right: 15px;
  background-color: #FFF;
  padding: 20px 5px 5px 5px;
  border-radius: 5px;
  border: 1px solid #999;
  z-index: 10;
  box-shadow: 2px 2px 9px rgb(0 0 0 / 40%);
  background-position: top 5px right 5px;
  background-size: 11px;
}
.bz-pop-panel .bz-content{
  border-bottom: 1px solid #d3dbde;
  margin-bottom: 8px;
  padding-bottom:8px;
}
.bz-pop-panel .bz-panel{
  padding-bottom:0;
}
.bz-top-bar{
  position:fixed;
}
.bz-top-bar .bz-pop-panel{
  right:0;
}

.bz-input-cross-box:hover .bz-input-cross{
  display:unset;
}
.bz-input-cross:hover{
  background-color: #DDD;
}
.bz-err-msg-box{
  border-radius: 5px;
  width: fit-content;
  margin: 15px 25px;
  background-color: #FDD;
}
.bz-err-msg-box legend{
  font-weight: bold;
}

.bz-switch.bz-hide{
  visibility:hidden;
  display:unset;
}
.bz-title .bz-result.bz-failed{
  cursor:pointer;
}
.bz-title .bz-result:before{
  margin-left:5px;
}
.bz-title .bz-result.bz-failed:hover{
  background-color:#DDD;
}
.bz-switch{
  width:30px;
  margin:0 5px;
}
.bz-title .bz-result{
  width:30px;
  margin:0 5px;
}

.bz-info-box{
  display:flex;
  margin-left: 10px;
  flex:1
}

.bz-header .bz-icon{
  width:30px;
  margin:2px 5px;
}

.bz-switch,.bz-camera,.bz-play,.bz-new-bug,.bz-bug,.bz-cross,.bz-download,.bz-setting,.bz-search,.bz-ab,.bz-analyze,.bz-result.bz-failed{
  border-radius: 20px;
  width: 30px;
  height: 30px;
  padding: 0;
  margin: 0 5px;
}
.bz-input-cross{
  position: absolute;
  width: 16px !important;
  margin-top: 9px !important;
  background-size: 7px;
  margin-left: -20px !important;
  height: 16px;
  background-color: #FFF;
  border-radius: 10px;
  display: none;
  padding-top: 2px;
}
.bz-mini-icon{
  height: 12px !important;
  width: 12px !important;
  background-size: 12px;
  border: 0;
  top: 5px;
  right: 1px;
  background-color: transparent;
  display: inline-block;
}

.bz-mini-letter{
  font-size:11px;
}
.bz-mini-icon-letter:before{
  font-size:11px !important;
}
.bz-show-failed-only{
  line-height: 34px;
  margin-right: 10px;
}
.bz-header input[type=checkbox]{
  margin-right: 5px;
}
.bz-pop-panel .bz-icon-col:firstChild{
  border:1px solid #d3dbde;
}
.bz-pop-panel .bz-icon-col{
  width:50px;
  padding-left:5px;
  margin-left:8px;
  margin-top:0;
  margin-bottom:0;
  padding-top:2px;
}
.bz-icon-col:before{
  margin-right:5px;
  position: relative;
  top: -1px;
}
.bz-none{
  visibility:hidden;
}
.bz-pop-panel .bz-mini-icon.bz-switch{
  background-size: 5px;
  position: relative;
  background-position: center;
  top:6px;
  width: 15px !important;
  height: 15px !important;
}
.bz-camera:hover .bz-tmp-screenshot{
  display:block;
}
.bz-tmp-screenshot{
  display: none;
  right: 160px;
  position: fixed;
  min-width: 400px;
  top: 10px;
  z-index: 11111111111111111111111111;
}
.bz-tmp-screenshot:hover{
  display:block;
}
.bz-mini-img{
  margin:0 10px;
  width:200px
}
.bz-mini-img:hover{
  margin-right:300px;
  width:unset;
  position:fixed;
  top:50px;
  right:0px;
}
.bz-row-high{
  line-height:30px;
}
.bz-level-scenario{
  /** border-top:1px solid #d3dbde; */
}
.bz-tab-panel{
  overflow:auto;
  padding:5px;
  background-color:#EEE;
}
.bz-tab-bar{
  border-bottom:1px solid #d3dbde;
  display:flex;
}
.bz-tab{
  cursor:pointer;
  margin:10px;
}
.bz-tab.bz-active{
  border-bottom:1px solid #009;
}
.bz-close{
  position: relative;
  padding: 4px 10px;
  border: 1px solid;
  width: 68px;
  background-position-x: 10px;
  border-radius: 25px;
}

.bz-node-title{
  flex:1;
}
.bz-pop-panel hr{
  height:1px;
  border-width:0;
  background-color:#d3dbde;
  margin: 0;
}
.bz-pop-panel .bz-mini-icon.bz-scenario,
.bz-pop-panel .bz-mini-icon.bz-test{
  position:relative;
  top:2px;
}
.bz-node-title-bar .bz-mini-icon.bz-scenario,
.bz-node-title-bar .bz-mini-icon.bz-test{
  position:relative;
  top:8px;
}
.bz-hide{
  display:none;
}
.bz-node .bz-node{
  padding-left:20px;
}
.bz-node .bz-title-text{
  line-height:25px;
}
.bz-term-bar{
  display:flex;
  margin-right:17px;
}
.bz-term-title{
  width:235px;
  text-align:center;
}
.bz-in-hash .bz-term-title{
  width:50px;
}
@media (min-width: 1600px)
body {
  font-size: 13px;
}
.bz-icon-col.bz-timer2{
  border-left:1px solid #CCC;
}
.bz-diff-item{
  background-color: #F99;
}
.bz-diff-item1{
  background-color: #9F9;
}
.bz-diff-item2{
  background-color: #FCC;
}
.bz-diff-item12{
  background-color: #CFC;
}
.bz-same-item{
  display:none;
}
.std{
  border-radius: 10px;
  background-color: #33F;
  color: #FFF;
  border: 1px solid #33F;
  padding: 2px 15px;
  line-height: 20px;
  cursor: pointer;
}
.std:hover{
  background-color: #009;
  color: #FFF;
}
input[type=number]{
  width:50px;
}
#bz-chk-replay-all{
  display:none;
  float:right;
  margin-right:5px;
}
.bz-result-header{
  color:#00C;
  position: sticky;
  top: 67px;
  background: #f3f7f9;
  padding: 7px;
  margin-left: 0px;
  z-index: 1;
}
#bz-result-content{
  font-weight:bold;
  white-space:pre;
}
.bz-hide-scope-header:before{
  display:none;
}
.bz-failed{
  color:red;
}

#bz-result-content .bz-failed:before,
#bz-result-content .bz-success:before{
  position: relative;
  top: -1px;
}
.bz-play-list{
  max-height:300px;
  overflow:auto;
}
.bz-form{
  margin:5px;
}
.bz-form>div{
  margin:5px;
}
.bz-form label{
  display:flex;
}
.bz-form label>span{
  flex:1;
}
.bz-form label>input{
  flex:3;
}
    `
  },
  updateFormatLogSetting:function(setting){
    try{
      localStorage.setItem("bz-log-format",JSON.stringify(setting))
    }catch(e){}
  },
  exeFormag:function(setting,auto){
    formatter.startTime=formatter.startTime||Date.now()
    console.log("start:"+formatter.startTime)
    if(setting.gotoOrg){
      setting.ignore= 1
      delete setting.gotoOrg
      formatter.updateFormatLogSetting(setting)
      location.reload()
    }else if(setting.ignore){
      delete setting.ignore
      formatter.updateFormatLogSetting(setting)
      return
    }
    if(!document.body.innerHTML.includes("Boozang runner")&&!document.getElementsByTagName("iframe")[0]&&parent==window){
      if(!auto){
        alert("There is no boozang test log")
      }else{
        if(Date.now()-auto>30000){
          return
        }else{
          return setTimeout(()=>{
            formatter.exeFormag(setting,auto)
          },100)
        }
      }
      formatter.removeDoingInfo()
      return
    }
    formatter.showDoing("Loading log ...")
    let ps=document.getElementsByTagName("pre")
    for(let p of ps){
      p.style.display="none"
    }

    if(!window.$){
      return setTimeout(()=>{
        formatter.exeFormag(setting,auto)
      },1000)
    }
    formatter.updateFormatLogSetting(setting)

    let o=$(".console-output")[0]||$(document.body).find("pre")[0]
    if(o){
      if(location.href.endsWith("/console")){
        if(auto){
          location.href+="Full"
        }else{
          if(confirm("Not in full-log, do you want to format full-log to get better result?")){
            location.href+="Full"
            return
          }
        }
      }
    }else{
      formatter.removeDoingInfo()
      return
    }

    if(!formatter.data){
      formatter.insertCss()
      document.documentElement.scrollTop=0
      if(!document.title){
        let title=location.href.match(/\/([^\/]+\.log)$/)
        if(title){
          document.title=title[1]
        }
      }
      formatter.data={
        errHashMap:{},
        moduleMap:{},
        setting:setting,
        totalActions:0,
        totalTests:0,
        totalScenarios:0,
        successScenarios:0,
        failedScenarios:0,
        project:{
          init:{},
          end:{}
        },
        scenarioMap:{},
        scenarioAnaMap:{},
        testMap:{},
        workerMap:[],
        waitingListMap:{},
        runningTestMap:{},
        curWorker:"master"
      }
      
      let p=$("<div class='bz-log-box'></div>")

      $(o.parentElement).append(p)
      

      $(o).hide()

      formatter.element=formatter.buildLayout(p)
      formatter.definitEvent()

      doIt(o)
    }else{
      formatter.data.setting=setting
      location.reload()
    }
    
    function doIt(o){
      if(o.innerText){
        formatter.showDoing("Formatting Boozang Log ...")
        setTimeout(()=>{
          formatter.format(o,0)
        })
      }else{
        setTimeout(()=>{
          doIt(o)
        },500)
      }
    }
  },
  buildRunningTests:function(){
    let ls=Object.values(formatter.data.runningTestMap)
    if(formatter.lastRunningList){
      if(ls.length==formatter.lastRunningList.length){
        if(!ls.find(x=>{
          if(!formatter.lastRunningList.find(y=>y.code==x.code)){
            return 1
          }
        })){
          return 
        }
      }
    }
    
    doRefresh()
    function doRefresh(){
      formatter.lastRunningList=ls
      formatter.element.exePanel.html(ls.map(x=>formatter.getGroupElement(x)).join(""));
      if(ls.length){
        formatter.element.exePanel.show()
      }else{
        formatter.element.exePanel.hide()
      }
    }
  },
  openLastAction:function(k){
    let o=formatter.data.scenarioMap[k]||formatter.data.runningTestMap[k]
    formatter.initScenario(k);
    o=o.element.find(".bz-level-test").toArray().pop();
    if(o){
      formatter.openItem(o)
      o=$(o).find(".bz-switch")[0]
      $(o).click()
    }
  },
  cleanWaitingList:function(){
    let map=Object.keys(formatter.data.waitingListMap)
    
    formatter.element.waitingList.html(map.map(x=>{
      return `<div class="bz-content"><div class="bz-title"><button class="bz-icon bz-switch bz-hide"></button><span class="bz-scenario bz-icon"></span><div class="bz-title-text">${x}</div></div></div>`
    }).join(""))
    if(map.length){
      formatter.element.waitingList.show()
    }else{
      formatter.element.waitingList.hide()
    }
  },
  definitEvent:function(){
    let fa=formatter.data,fe=formatter.element;
    
    // $(window).scroll(function(){
      // let r=$(".bz-log-box")[0].getBoundingClientRect(),
          // o=$(".bz-header");
      // if(r.top<30&&document.documentElement.scrollTop>50){
        // o.addClass("bz-top-bar")
        // o.css({
          // left:r.left+"px",
          // right:window.innerWidth-17-r.right+"px"
        // })
      // }else{
        // o.removeClass("bz-top-bar")
      // }
    // })

    $(document.body).click(function(e){
      let o=$(e.target)
      if(o[0].id=="failedOnly"){
        formatter.data.failedOnly=o[0].checked
        setTimeout(()=>{
          formatter.showFailedOnlyResult()
          formatter.chkReplay()
        },10)
      }else if(o.hasClass("bz-search-content")){
        formatter.search(o.text())
      }else if(o.hasClass("bz-json-validation")){
        return formatter.checkJsonValidation(e.target)
      }else if(o.hasClass("bz-switch2")){
        return
      }else if(o.hasClass("bz-close")){
        formatter.closeScenario(o)
      }else if(o.hasClass("bz-switch")){
        switchPanel(o)
      }else if(o.hasClass("bz-tmp-screenshot")){
        o.parent().click()
      }else if(o.hasClass("bz-input-cross")){
        $(".bz-search-input").val("")
        formatter.search()
      }else if(o.hasClass("bz-cross")){ //close init,declare panel and pop-panel
        let k=o.attr("key")
        if(k){
          o.removeClass("bz-open")
          $("#"+k).addClass("bz-hide")
        }else if(o.parent().hasClass("bz-pop-panel")){
          o.parent().hide()
        }
      }else if(o.hasClass("bz-init-btn")){
        switchContent(o,"init")
      }else if(o.hasClass("bz-declare-btn")){
        switchContent(o,"declare")
      }else if(o.hasClass("bz-camera")){
        if(o.attr("path")){
          formatter.openWindow(formatter.getCameraPath(o.attr("path")),"_blank")
        }else{
          formatter.showCameraPanel()
        }
      }else if(o.hasClass("bz-log-item")){
        openLog(o)
      }else if(o.hasClass("bz-search")){
        formatter.search($(".bz-header input.bz-search-input").val())
      }else if(o.hasClass("bz-analyze")){
        analyzer.doAnalysis()
      }else if(o.hasClass("bz-download")){
        formatter.download()
      }else if(o.hasClass("bz-ab")){
        formatter.showCompare()
      }else if(o.hasClass("bz-bug")||o.hasClass("bz-new-bug")||o.hasClass("bz-failed-hash")){ //bug button
        let url=o.attr("path")||o.attr("hash")
        if(url.match(/^[0-9A-F]+$/)){
          formatter.openIDE("rootCause/"+url)
        }else{
          formatter.openWindow(url,"bz-bug")
        }
      }else if(o.hasClass("bz-failed")&&o.hasClass("bz-result")){
        gotoHash(o)
      }else if(o.css("cursor")=="pointer"&&(o.hasClass("bz-title-text")||o.hasClass("bz-line"))){
        openTest(o)
      }else if($(".bz-info-box").find(o)[0]){
        openTest($(".bz-info-box"))
      }else if(o.is(".bz-sort-bar button")){
        formatter.sort(o)
      }else if(o.is(".bz-copy")){
        formatter.copyText(o.parent().parent()[0])
      }else if(o.is("#bz-chk-replay-all")){
        formatter.chkReplay(o)
      }else if(o.is(".bz-chk-replay")){
        formatter.chkReplay(o)
      }else if(o.is(".bz-play")){
        formatter.doPlay()
      }
    });

    $(document.body).on("mousemove",".bz-scope .bz-title-text,.bz-scope .bz-line,fieldset",function(e){
      let _this=this
      if(!$(this).find(".bz-copy")[0]){
        $(".bz-copy").remove()
        if(this.tagName!="FIELDSET"||!$(this).is(".bz-pop-panel *")){
          $("<span style='position:absolute;'><button class='bz-copy bz-mini-icon bz-icon'></button></span>").appendTo(this)
        }
      }
    })

    $(document.body).on("mousemove",".bz-title-text,.bz-line,.bz-camera",function(e){
      let o=e.target,path=$(o).attr("bz")
      if($(o).hasClass("bz-camera")){
        insertScreenshot(o)
        return
      }
      
      if(!path){
        path=o.innerText.match(/m[0-9]+[\.\/\-]t[0-9]+([\.\/][0-9]+)?/)||o.innerText.match(/https?:\/\/.+/)
        if(!path){
          return
        }
        path=path[0]
      }

      if(!o.posRight){
        let s=o.innerHTML
        o.innerHTML=`<span>${s}</span>`
        let r=o.children[0].getBoundingClientRect()
        o.posRight=r.right
        o.innerHTML=s
      }
      if(e.clientX<o.posRight){
        o.style.cursor="pointer"
        $(o).addClass("bz-clickable")
        if(path.includes("http")){
          o.title="Click to open page("+path+")"
        }else{
          o.title="Click to open test case("+path+") in IDE"
        }
      }else{
        $(o).removeClass("bz-clickable")
        o.style.cursor="default"
      }
    });


    $(document.body).on("mouseover",".bz-hash-msg",function(e){
      let t=e.target.innerText.trim()
      $(".bz-hash-msg").removeClass("bz-highlight-msg")
      $(".bz-hash-msg").toArray().forEach(x=>{
        if(x.innerText==t){
          $(x).addClass("bz-highlight-msg")
        }
      })
    })
    document.body.onkeydown=function(e){
      if(e.keyCode==27){
        e=$(":focus")[0]
        if(!e||!["INPUT","TEXTAREA"].includes(e.tagName)){
          $(".bz-esc-click").click()
          return false
        }
      }
    }
    function insertScreenshot(o){
      let path=$(o).attr("path")
      if(path&&!$(o).find("img")[0]){
        $(o).append("<img src='"+formatter.getCameraPath(path)+"' class='bz-tmp-screenshot'>")
      }
    }

    function gotoHash(o){
      o=o[0]
      while(o.parentElement&&!$(o.parentElement).hasClass("bz-scope")){
        o=o.parentElement
      }
      let switcher=$(o).find(".bz-switch")[0]
      formatter.initScenario(switcher.attributes.key.value)
      let oo=$(o).find(".bz-level-action .bz-failed-title")[0]
      if(oo){
        formatter.openItem(oo)
        oo=$(oo).find(".bz-switch")
        if(!oo.hasClass("bz-open")){
          oo.click()
        }
      }
      oo=$(o).find(".bz-failed-hash")[0]
      if(oo){
        formatter.openItem(oo)
        oo.focus()
      }
    }
    
    function openLog(o){
      let n=o.text().match(/[0-9]+/)
      if(n&&formatter.data.wrongLog){
        return
      }
      if(n){
        n=formatter.getLogList()[n[0]-2]
      }else{
        n=location.href
      }

      formatter.data.setting.gotoOrg=1
      formatter.updateFormatLogSetting(formatter.data.setting)
      formatter.data.setting.gotoOrg=0
      formatter.openWindow(n)
    }
    function openTest(o){
      let v=o.attr("bz")
      if(!v){
        v=o.text().match(/(m[0-9]+)[\.\/-](t[0-9]+)([ \.\/\-]?\(?([0-9]+)\)?)?/)
        if(v){
          let vv=v[1]+"/"+v[2]
          if(v[4]){
            vv+="/"+v[4]
          }
          v=vv
        }else{
          v=o.text().match(/https?:\/\/[^ ]+$/)
          if(v){
            formatter.openWindow(v[0])
          }
        }
      }
      if(v){
        formatter.openIDE(v)
      }
    }
    function getCloserElementInContent(o,c){
      while(o[0]){
        if(o.is(c)){
          return o[0]
        }
        let v=o.find(c)
        if(v[0]){
          return v[0]
        }
        if(o.hasClass("bz-content")){
          return 
        }
        o=o.parent()
      }
    }
    
    function switchPanel(o,force){
      let k=o.attr("key"),c="bz-open",switcher,panel

      panel=$(".bz-panel."+k)

      switcher=o
      if(k[0]=="m"){
        let s=formatter.initScenario(k)
        switcher=s.switcher
      }else if(k[0]=="p"){
        if(!formatter.data.project.init.element){
          formatter.data.project.init.element=panel
          panel.html(formatter.strToHtml(formatter.data.project.init.org))
        }
      }
      if(switcher.hasClass(c)){
        if(force=="open"){
          return
        }
        switcher.removeClass(c)
        panel.hide()
        if(formatter.data.runningTestMap[k]){
          formatter.cleanScenarioPanel(k)
        }
      }else{
        if(force=="close"){
          return
        }
        switcher.addClass(c)
        panel.show()
        panel.find(".bz-line,.bz-level-action").show()
        if(formatter.data.runningTestMap[k]){
          formatter.data.runningTestMap[k].openning=1
        }
      }
    }
    
    function switchContent(o,k){
      let id=o.attr("key"),e,closer;
      if(id[0]=="t"){
        e=$("#"+id+"-"+k)
        closer=e.find(".bz-cross")
      }else{
        s=formatter.initScenario(id)
        e=s[k].element
        closer=s[k].closer
      }
      if(closer[0].getBoundingClientRect().width){
        closer.removeClass("bz-open")
        e.addClass("bz-hide")
      }else{
        closer.addClass("bz-open")
        e.removeClass("bz-hide")
        switchPanel(o,"open")
      }
    }
    
  },
  chkReplay:function(o){
    setTimeout(()=>{
      if(o&&o.is("#bz-chk-replay-all")){
        $(".bz-chk-replay").toArray().filter(x=>x.getBoundingClientRect().width).forEach(x=>x.checked=o[0].checked)
      }else{
        $("#bz-chk-replay-all")[0].checked=!$(".bz-chk-replay").toArray().filter(x=>x.getBoundingClientRect().width).find(x=>!x.checked)
      }

      $(".bz-play").attr({disabled:!$(".bz-chk-replay").toArray().find(x=>x.getBoundingClientRect().width&&x.checked)})
    },10)
  },
  closeScenario:function(o){
    while(!o.hasClass("bz-level-scenario")){
      o=o.parent()
    }
    o=o.find(".bz-switch.bz-open")
    o.click()
    o.focus()
  },
  openWindow:function(url,name,size){
    let w=window.open(url,name,size)
    if(!w){
      chrome.runtime.sendMessage({bz:1,bg:1,fun:"openWindow",data:{url:url,name:name}});
    }
  },
  cleanScenarioPanel:function(k){
    let s=formatter.data.scenarioMap[k]
    delete s.element
  },
  getGroupElement:function(o){
    let level=o.level,ctrl="",exPanel="",endPanel="";
    if(level=="scenario"||level=="test"){
      ctrl=`<button key="${o.code}" class="bz-icon bz-init-btn bz-init">(${o.init.time||"0s"})</button>`
    }
    if(level=="scenario"){
      ctrl=`
        ${ctrl}
        <button key="${o.code}" class="bz-icon bz-declare-btn bz-declare">(${o.declare.time||""})</button>
        <button title='${o.bug&&o.bug.msg&&o.bug.msg.replace(/[<]/g,"&lt;").replace(/[>]/g,"&gt;")}' class="bz-icon bz${o.bug?o.bug.type:""}-bug ${!o.bug&&'bz-hide'}" hash="${o.bug&&o.bug.hash}" path="${o.bug&&o.bug.path}"></button>
        <button class="bz-icon bz-camera ${o.bug?o.camera?"":"bz-disable-icon":"bz-hide"}" title="${o.cameraMsg||""}" path="${o.camera||""}"></button>
      `
    }
    if(ctrl){
      ctrl=`<div class="bz-ctrl-box">${ctrl}</div>`
    }
    
    if(level=="scenario"){
      exPanel = formatter.getGroupElement({name:"Declare",level:"declare",type:"declare",code:o.code+"-declare",close:"cross",css:"bz-hide"})
              + formatter.getGroupElement({name:"Initial",level:"init",type:"init",code:o.code+"-init",close:"cross",css:"bz-hide"})
      endPanel=`<div class='bz-end ${o.code}-end'></div>`
    }else if(level=="test"){
      exPanel = formatter.getGroupElement({name:"Initial",level:"init",type:"init",code:o.code+"-init",close:"cross",css:"bz-hide",details:o.init.details})
      delete o.init.details
    }
    
    let html= `
    <div id="${o.code}" class="bz-content bz-close-panel bz-level-${level} ${o.ckey||""} ${o.css||""}">
      <div class="bz-title bz-${o.result}-title">
        <button key="${o.code}" style="background-size:${o.close?12:8}px;visibility:${o.details!==undefined&&!o.details?'hidden':'unset'}" class="bz-icon bz-${o.close||"switch"}"></button>
        <div class="bz-icon bz-${o.type}"></div>
        <div class="bz-title-text" bz="${o.bz||""}">${o.title||o.name}</div>
        ${ctrl}
        <div class="bz-time">${o.time||""}</div>
        ${o.result?`<div class="bz-result bz-icon bz-${o.result}"></div>`:""}
        ${o.type=='scenario'?'<input class="bz-chk-replay" type="checkbox"/>':''}
      </div>
      <pre class="bz-panel ${o.code}" ${o.close?'':'style="display:none;"'}>
        ${exPanel}
        <div class='bz-details ${o.code}-details'>${o.details&&o.details.constructor==String?o.details:""}</div>
        ${endPanel}
      </pre>
    </div>`
    return html
  },
  showFailedOnlyResult:function(){
    for(let k in formatter.data.scenarioMap){
      let o=formatter.data.scenarioMap[k]
      if(o.result=="success"&&formatter.data.failedOnly){
        formatter.hideScenario(o)
      }else{
        $("#"+o.code).show()
      }
    }
  },
  getLogList:function(masterUrl){
    let v;
    try{
      eval("v="+formatter.data.setting.identifyWorker)
      v= v(masterUrl)
      if(!v||v.constructor!=Array||v.includes(masterUrl)){
        v=[]
      }
    }catch(ex){
      v=0
    }
    return v||[]
  },
  buildLayout:function(p,setting){
    let fd=formatter.data;

    let o={
      header:$(`<div class="bz-row bz-header">
        <div class='bz-icon-letter bz-timer'></div>
        <label class='bz-show-failed-only'><input type="checkbox" id="failedOnly"/>Only show Failed</label>
        <div class="bz-log-bar bz-nowrap">
          <label style="margin-left:5px;color:#000;font-weight:bold;">Org-Log: </label>
          <a class='bz-master-log bz-log-item'>master,</a>
          ${formatter.getLogList().map((a,i)=>"<a class='bz-log-item'>"+(i+2)+",</a>").join("").replace(/,<\/a>$/,"</a>")}
        </div>
        <div class="bz-sort-bar bz-nowrap">
          <label style="margin-left:5px;color:#000;font-weight:bold;">Sort: </label>
          ${[{n:"Completion",k:"idx",c:"bz-a-z"},{n:"Id",k:"code"},{n:"Name",k:"name"},{n:"Result",k:"result"},{n:"Performance",k:"time"},{n:"Worker",k:"worker"}]
          .map(x=>`<button id="sort-${x.k}" class="bz-icon-letter ${x.c||""}">${x.n}</button>`).join("")}
        </div>
        <div class="bz-input-cross-box">
          <input class='bz-search-input' type="text"/>
          <button class="bz-cross bz-icon bz-input-cross"></button>
        </div>
        <button class="bz-icon bz-search"></button>
        <button class='bz-icon bz-download' title='Download log'></button>
        <button class='bz-icon bz-analyze' title='Show test case execution summary' disabled='true'></button>
        <button class='bz-icon bz-ab' title='Compare with other log to see the diffences'></button>
        <button class='bz-icon bz-camera' title='Show screenshot list' disabled='true'></button>
        <button class='bz-icon bz-play' title='Re-Play checked scenarios' disabled='true'></button>
        <div class='bz-pop-panel bz-close-panel bz-hide'><button class="bz-mini-icon bz-cross" style="position:absolute;"></button><div class='bz-box'></div></div>
      </div>`).appendTo(p),
      init:$(formatter.getGroupElement({name:"Initial",code:"project-init",level:"project",type:"init"})).appendTo(p),
      exePanel:$("<div class='bz-scope' bz-name='Executing list'></div>").appendTo(p),
      resultPanel:$("<div class='bz-result-header'><span id='bz-result-content'></span><input type='checkbox' id='bz-chk-replay-all'/></div>").appendTo(p),
      panel:$("<div class='bz-scope bz-hide-scope-header'></div>").appendTo(p),
      waitingList:$("<div class='bz-scope bz-hide' bz-name='Waiting list'></div>").appendTo(p),
      end:$("<pre class='bz-scope bz-end'></pre>").appendTo(p)
    };
    
    let popPanel=$(".bz-pop-panel");
    popPanel.mousedown(function(e) {
      this.isDown = true;
      let r=this.getBoundingClientRect()
      this.org={
        left:r.left,
        top:r.top,
        x:e.clientX,
        y:e.clientY
      }
      popPanel.css({
        position:"fixed",
        "margin-top":0,
        top:this.org.top+"px",
        left:this.org.left+"px",
        right:"unset",
        "z-index":2000000000000000000
      })
      $(document.body).addClass("disable-select")
    });

    popPanel.mouseup(function() {
      this.isDown = false;
      $(document.body).removeClass("disable-select")
    });

    popPanel.mousemove(function(e) {
      if (this.isDown) {
        e.preventDefault();
        popPanel.css({
          top:this.org.top+(e.clientY - this.org.y)+"px",
          left:this.org.left+(e.clientX - this.org.x)+"px",
          right:"unset"
        })
      }
    });
    popPanel.mouseout(function(){
      this.isDown=0
      $(document.body).removeClass("disable-select")
    })

    o.header.find("input.bz-search-input").change(function(e){
      formatter.search(this.value)
    })

    if(!formatter.isMasterPage(formatter.data.setting)){
      $(".bz-log-bar").hide()
    }
    return o
  },
  format:function(o,chkTime){
    formatter.doingWorker="master"
    let idx=0,ws=o.innerText
    o.innerHTML=""
    if(!location.host&&!ws.length){
      formatter.data.completed=1
      formatter.element.waitingList.hide()
    }
    
    formatter.buildScenarioList(ws,function(){
      if(!formatter.endTime){
        formatter.endTime=Date.now()
        console.log("End: "+(formatter.endTime-formatter.startTime))
      }
      formatter.keepLogMap("master")

      if(formatter.chking>=30){
        formatter.chking=0
        formatter.formatWorkers()
      }else{
        formatter.doingWorker=""
      }
      if(!chkTime){
        formatter.chkTime=setInterval(()=>{
          if(formatter.data.completed){
            doEnd()
            return clearInterval(formatter.chkTime)
          }

          if(!formatter.doingWorker){
            formatter.chking++

            formatter.takeLogMap("master")
            formatter.format(o,1)
          }
        },1000)
      }
    })
    
    function doEnd(){
      if(!formatter.doingWorker){
        formatter.takeLogMap("master")
        formatter.data.project.end.org=formatter.data.curEnd
        formatter.element.end.html(formatter.strToHtml(formatter.data.curEnd))
        formatter.element.exePanel.hide()
        $(".bz-chk-replay,#bz-chk-replay-all").show()
      }else{
        setTimeout(()=>{
          doEnd()
        },1000)
      }
    }
  },
  formatWorkers:function(){
    formatter.doingWorker="workers"
    
    let v=formatter.data.setting.retrieveWorkerLog&&formatter.isMasterPage(formatter.data.setting)?formatter.getLogList():[]
    doIt(v,0)

    
    function doIt(vs,i){
      let s=vs[i]
      if(s&&!formatter.data.wrongLog){
        $.ajax({
          url:s,
          method:"GET",
          complete:function(c){
            c=c.responseText.split("\n")
            if(c.length){
              while(c.length&&!c.pop()){}
              if(c.length>3){
                c.pop()
              }
              formatter.takeLogMap(i)
              formatter.logMap[i].size=formatter.logMap[i].size||0
              c=c.splice(formatter.logMap[i].size)
              formatter.logMap[i].size+=c.length
              if(c.length>3000){
                formatter.showDoing("Formatting worker("+(i+2)+") Log ...")
              }
              
              formatter.buildScenarioList(c.join("\n"),function(){
                formatter.keepLogMap(i)

                doIt(vs,i+1)
              })
            }
          }
        })
      }else{
        formatter.doingWorker=0
        formatter.removeDoingInfo()
      }
    }
  },
  checkJsonValidation:function(o){
    let v=o.nextElementSibling.innerHTML
    v=v.split("-- Validation --").map(x=>x.trim())
    let vv=v[0].split("-- Data --").map(x=>x.trim())
    v[0]=vv[1]
    vv=vv[0].substring(4).trim()
    vv+="/showValid"
    chrome.runtime.sendMessage({bg:1,fun:"setValidJsonData",data:{data:v[0],valid:v[1],url:vv}});
  },
  buildScenarioList:function(v,bkFun){
    let fd=formatter.data,
        fe=formatter.element,
        parsingScenario;
    if(!v){
      return bkFun&&bkFun()
    }
    v=(fd.curEnd||"")+v

    let ss=v.match(/\n[0-9]+\: BZ-Result\:(Success|Failed|Stop)$/gm)||[],
        list=[],
        remoteList=v.match(/\n[0-9]+\: \.{4} .+ Remote \[m[0-9].+\] .+Completed in (.+) Tasks:[ 0-9\/\.]+$/gm)||[]

    ss.forEach(x=>{
      let ei=v.indexOf(x)
      
      let sv=v.substring(0,ei+x.length)
      v=v.substring(sv.length).trim()
      if(x.includes("BZ-Result:Stop")){
        return
      }
      handleItem(sv,x)
    })
    
    fd.curEnd=v

    if(!fd.waitingListSize){
      fd.totalScenarios+=ss.length
    }

    let ls=list=list.filter(x=>!fd.failedOnly||x.result=="failed")
    if(ls.length){
      fe.panel[0].innerHTML+=ls.map(x=>formatter.getGroupElement(x)).join("")
      formatter.element.header.find(".bz-analyze").attr({disabled:false})
      formatter.cleanWaitingList()
    }

    assignWoker()
    handleRealTimeInfo()
    if(!handleTaskEnd(v)){
      handleRunningTest(fd.curEnd)
    }

    bkFun()
    
    function handleRunningTest(x){
      v=x
      try{
        handleItem(x)
      }catch(ex){
        
      }
      try{
        if(parsingScenario&&parsingScenario.code){
          fd.runningTestMap[parsingScenario.code]=parsingScenario
          formatter.buildRunningTests()
        }
      }catch(e){
      }
    }
    
    function handleItem(sv,x){
      sv=handleJsonValidation(sv)
      let s={
        idx:parseInt(x?x.match(/[0-9]+/)[0]:0),
        result:x?x.includes("Success")?"success":"failed":"running",
        org:sv,
        type:"scenario",
        level:"scenario",
        declare:{},
        init:{},
        details:{
          tests:[]
        },
        end:{}
      }
      parsingScenario=s
      list.push(s)
      if(x){
        handleSummaryInfo(s)
      }
      handleStartTime(s)
      handleDeclare(s)
      handleInit(s)

      handleFailedScenario(s)
      handleEnd(s)
      // if(fd.curLastScenario){
        // fd.curLastScenario.time=formatter.getSpendTime(fd.curLastScenario.start,s.start,"scenarioTime")
        // fd.curLastScenario.endTime=s.start
      // }
      fd.curLastScenario=s
    }
    
    function handleSummaryInfo(s){
      if(s.result=="success"){
        fd.successScenarios++
      }else{
        fd.failedScenarios++
      }
      let ts=s.org.match(/\n[0-9]+: +>{4} Loading .*Test \[m[0-9].+$/gm)
      if(ts){
        fd.totalTests+=ts.length
        ts=s.org.match(/\n[0-9]+: ##Action.+$/gm)
        if(ts){
          fd.totalActions+=ts.length
        }
      }
    }
    
    function handleStartTime(s){
      let sv=s.org,w
      if(!fd.curLastScenario){
        let declare=sv.match(/\n[0-9]+\: BZ-LOG: declare on \[m[0-9]+\.t[0-9]+[ \(\]][^\n]+\n/gm)
        
        if(declare){
          w=formatter.splitByWord(sv,declare[1]||declare[0])
          s.org=w[1]
        }
      }

      s.start=formatter.retrieveTimeFromLog(s.org)

      if(!fd.project.init.org){
        fd.project.init.org=w[0]
        fd.project.init.time=formatter.getSpendTime(0,s.start)
        handleWaitingList(w[0])
        handleSetting(w[0])
      }
    }

    function handleDeclare(s){
      let sv=s.org
      let w=sv.match(/\n([0-9]+)\: +\>+ Loading Scenario \[((m[0-9]+\.t[0-9]+)(\(([0-9]+)\))?)\] - (.+) \(([0-9:]+)\) \>+$/m);
      if(!w){
        s.declare.org=sv
        s.org=""
        return
      }
      let k=w[2].replace(/[^tm0-9]/g,"-").replace(/-$/,"")
      
      s.ckey="module-"+k,
      s.code=k+"-"+fd.curWorker

      s.name=w[6]
      s.bz=w[3]
      s.start=w[7]
      s.title="["+w[2]+"] "+w[6]
      s.dataIdx=w[5]
      fd.scenarioMap[s.code]=s
      w=formatter.splitByWord(s.org,w[0]);
      s.declare.org=w[0]
      s.org=w[1]
      s.init.start=s.start
      s.declare.start=formatter.retrieveTimeFromLog(s.declare.org)
      s.declare.time=formatter.getSpendTime(s.declare.start,s.init.start,"declareTime")

      delete fd.waitingListMap[k]
      if(s.result!="running"){
        delete fd.runningTestMap[s.code]
      }
    }
    
    function handleInit(s){
      if(s.org){
        let w=formatter.splitByWord(s.org,/\n[0-9]+\: ##Action.+/);
        if(!w){
          s.init.org=s.org
          delete s.org
          return
        }
        s.init.org=w[0]
        s.org=w[1]
        s.details.start=formatter.retrieveTimeFromLog(w[1])
        s.init.time=formatter.getSpendTime(s.init.start,s.details.start,"initTime")||"0"
      }
    }
    
    function handleEnd(s){
      if(s.org){
        let mk=/[0-9]+\: +<+ [^\[]+Feature - Scenario \[m[0-9][^\]]+\] ([0-9\:]+) [^<]+<<<</ms;
        let w=formatter.splitByWord(s.org,mk);
        if(!w){
          s.details.org=s.org
        }else{
          mk=w[1].match(mk)
          if(mk){
            s.endTime=mk[1]
            s.time=formatter.getSpendTime(s.start,s.endTime)
          }
          s.details.org=w[0]
          delete s.org
          s.end.org=w[1]
        }
      }
    }

    function handleSetting(v){
      let x=v.match(/(http.+[\/].+)\/extension.*[?&]token\=.+#.+/gm);
      
      if(x){
        x=x.find(y=>y.match(/\/run/))||x[0]
        fd.center=x.split("localized=")[1]
        if(fd.center){
          fd.center=fd.center.split(/[\&\#]/)[0]
        }
        fd.center=fd.center||"Boozang"
        x=x.match(/(http.+[\/].+)\/extension.*[?&]token\=.+#([^\/]+)[\/]([^\/]+)([\/](m[0-9]+[\/]t[0-9]+)[\/]run)?/);
        
        fd.startUrl=x[1]+"/extension?id="+x[2]+"#"+x[2]+"/"+x[3]+"/"
        fd.host=x[1]
        fd.project.code=x[2]
        fd.version=x[3]
        fd.rootTest=(x[5]||"").replace("/",".")

        if(x[5]){
          fd.environment=v.split("&env=")[1].split("&")[0]
        }
      }
      x=v.match(/[0-9]+\: IDE version\: ([0-9\.]+)/m);
      if(x){
        fd.ideVersion=x[1]
      }
      x=v.match(/Running Boozang runner version\: ([0-9\.]+)/m);
      if(x){
        if(x[1]=="."){
          x[1]="Beta"
        }
        fd.containerVersion=x[1]
      }

      x=v.match(/Extension version\: ([0-9\.]+)/);
      if(x){
        fd.extensionVersion=x[1]
      }
      
      x=v.match(/[0-9]+\: ([0-9-]+ )([0-9 -]+)$/m)
      if(x){
        fd.startTime=x[1]+x[2].replace(/-/g,":")
      }
      formatter.data.testreset=(v.match(/testreset\: ([0-9]+)/)||[])[1]

      fe.init.find(".bz-title-text").html(`
        <span style='margin-right:20px;'>Initial: </span>
        <div><label>Start time: </label><span>${fd.startTime}</span></div>
        <div><label>Version: </label><span>${fd.version}</span></div>
        <div><label>Root test: </label><span>${fd.rootTest}</span></div>
        <div><label>Environment: </label><span>${fd.environment}</span></div>
        <div><label>Container: </label><span>${fd.containerVersion}</span></div>
        <div><label>IDE: </label><span>${fd.ideVersion}</span></div>
        <div><label>Extension: </label><span>${fd.extensionVersion}</span></div>
        <div><label>Communication center: </label><span>${fd.center}</span></div>
      `);
      fe.init.find(".bz-title-text").addClass("bz-info-box")
      fe.init.find(".bz-time").text(fd.project.init.time)
    }

    function handleWaitingList(v){
      v=v.match(/[0-9]+: Split task\([^\)]+\): [^\n]+\n/gm)
      if(v){
        let map={}
        v.forEach(x=>{
          x=x.match(/(m[0-9]+.t[0-9]+)+\(?([0-9]+)?/)
          let k=x[1].replace(".","-")
          if(!x[2]){
            if(map[k+"-0"]){
              return
            }
          }else{
            delete map[k]
            k+="-"+x[2]
          }
          map[k]=1
        })

        fd.waitingListSize=fd.totalScenarios=Object.keys(map).length
        fd.waitingListMap=map
      }
    }

    function handleRealTimeInfo(){
      $(".bz-result-header span").html(`<span>Completed list [Scenarios: ${fd.totalScenarios} </span>( <span class='bz-success'> ${fd.successScenarios}</span><span class='${fd.failedScenarios?'':'bz-hide'}'>,</span> <span class='bz-failed ${fd.failedScenarios?'':'bz-hide'}'> ${fd.failedScenarios}</span> )  Tests: ${fd.totalTests}  Actions: ${fd.totalActions}]`)
    }

    function handleFailedScenario(s){
      if(s.result=="failed"){
        handleCamera(s)
        handleBug(s)
      }
    }

    function handleCamera(s){
      let w=s.org.match(/\n[0-9]+\: Screenshot\:([0-9a-f]{32})/ig);
      if(w){
        w=w.pop().match(/Screenshot\:([0-9a-f]{32})/i)[1]
        s.camera=w
        formatter.cameraList.push(w)
        formatter.element.header.find(".bz-camera").attr({disabled:false})
      }else{
        s.cameraMsg="There is no screenshot for API test case. Or got an error on loading page."
      }
    }

    function handleBug(s){
      let w=s.org.match(/\[Error Hash\: ([0-9A-F]+)\] \((.+)\)/)
      if(w){
        s.bug={hash:"",path:"",type:""}
        let msg=(s.org.match(/[0-9]+: ERROR MESSAGE: .*Failed on Action: m[0-9]+[^\n]+\n/ms)||[])[0]+"\n"+w[0]
        if(w[2]=="new"){
          s.bug.hash=w[1]
          s.bug.type="-new"
        }else{
          let link=s.org.match(/Root cause link: ?([^\n]+)\n/)
          if(link){
            msg+="\n\n"+link[0]
          }
          s.bug.path=(link||w)[1]
        }

        s.bug.msg=msg
        
      }
    }
    
    function handleTaskEnd(v){
      if(fd.curWorker=="master"){
        let w=v.match(/\n[0-9]+\: (task-done|stopped by container)/)
        if(w){
          w=w[0]
          if(w.includes("stopped")){
            k="üõë"
          }else{
            k="üö©"
          }
          fd.curEnd=v.replace(w,w+k)
          fd.completed=1
          return 1
        }
      }
    }
    
    function handleJsonValidation(v){
      v=v.replace(/BZ-Start-Validating:/g,"<span><a style='cursor:pointer'  class='bz-json-validation'>Check JSON Validation</a><div style='display:none'>")
      return v.replace(/BZ-End-Validating/g,"</div></span>")
    }

    function assignWoker(){
      remoteList.forEach(x=>{
        x=x.match(/\[(m[0-9]+\.t[0-9]+(\([0-9]+)?)\)?\] .+Completed in (.+) Tasks:[ 0-9\/\.]+$/)
        if(x){
          x={
            k:"module-"+x[1].replace(/[\.\(]/g,"-"),
            w:x[3]
          }
          let w=fd.workerMap[x.k]
          if(!w){
            fd.workerMap[x.k]=x
          }else if(w.w!=x.w){
            w.warning=1
            w.w+=", "+x.w
            w.done=0
          }
        }
      })
      for(let k in fd.workerMap){
        let w=fd.workerMap[k]

        if(w.done){
          continue
        }
        let os=$("."+w.k)
        let t=os.find(".bz-title-text");
        if(t.length){
          w.n=w.n||t[0].innerText
          let v=w.n+" ("+w.w+")"
          if(w.warning){
            v+=" ‚ö†Ô∏è"
            t.attr({title:"Duplicate execution"})
          }
          t.text(v)
          os.toArray().forEach(x=>{
            fd.scenarioMap[x.id].worker=w.w
          })
          w.done=1
        }
      }
    }
  },
  loadModuleInfo:function(v){
    let ms=v.match(/[0-9]+: Module info: \[m[0-9]+\] .+/gm)||[]
    ms.forEach(x=>{
      x=x.split(/\[|\] /);
      let c=x[1],n=x[2]
      let m=formatter.data.moduleMap[c]
      if(!m){
        m=formatter.data.moduleMap[c]={testMap:{}}
      }
      m.code=c
      m.name=n
    })
  },
  strToHtml:function(v,mark){
    v=v||""
    if(v.constructor==String){
      v=v.split("\n")
    }
    v=v.map(x=>`<div class="bz-line">${x}</div>`).join("")
    if(mark=="screenshot"){
      let k=v.match(/([0-9]+: Screenshot:([0-9a-f]{32}))/i)
      if(k){
        formatter.lastImg="<img src='"+formatter.getCameraPath(k[2])+"'/>"
      }
    }

    if(mark=="declare"){
      v=v.replace(/(bz-line)(">[0-9]+: BZ-LOG: declare on \[m[0-9])/g,"$1 bz-declare$2")
    }

    v=v.replace(/(bz-line)(">[0-9]+: <---- Join worker)/g,"$1 bz-join$2")
    v=v.replace(/(bz-line)(\">[0-9]+: Remove worker )/g,`$1 bz-leave$2`)
    if(mark=="failed"){
      let img=formatter.lastImg||""
      formatter.lastImg=""
      v=v.replace(/<div class="bz-line">(\[Error Hash: ([A-F0-9]+)\][^<]*)<\/div>/,'<div><button title="Open the Root Cause in IDE" class="bz-failed-title bz-failed-hash" hash="$2">$1</button><button class="bz-icon bz-close bz-esc-click" title="Close current scenario">‚úñ close</button>'+img+'</div>')
      v=v.replace(/<div class="bz-line">([0-9]+\: ERROR MESSAGE: )([^<]+<\/div>)/,"<fieldset class='bz-err-msg-box'><legend>$1</legend><div class='bz-line'>$2");
      v=v.replace(/<\/div><div><button/,"</div></fieldset><div><button")
    }
    return v
  },
  buildAllDetails:function(os){
    (os||Object.keys(formatter.data.scenarioMap)).forEach(x=>formatter.initScenario(x))
  },
  initScenario:function(k){
    let fd=formatter.data
    let s=fd.scenarioMap[k]||fd.runningTestMap[k];
    if(!s.element&&(!fd.failedOnly||s.result=="failed")){
      s.element=$("#"+k)
      s.switcher=$(s.element.find(".bz-switch")[0])
      s.init.element=$("#"+k+"-init.bz-level-init")
      s.init.panel=s.init.element.find(".bz-panel>div")[0]
      s.init.closer=s.init.element.find(".bz-cross")

      s.declare.element=$("#"+k+"-declare.bz-level-declare")
      s.declare.panel=s.declare.element.find(".bz-panel>div")[0]
      s.declare.closer=s.declare.element.find(".bz-cross")
      
      s.details.element=s.element.find("."+k+"-details")
      
      s.end.element=s.element.find("."+k+"-end")
      
      buildSimpleContent(s.init.element.find(".bz-panel"),s.init.org)
      buildSimpleContent(s.declare.element.find(".bz-panel"),s.declare.org,"declare")
      if(s.details.org){
        s.details.element.html(buildTests(s.details.org,1,s.details.start,s.endTime,s.bz))
      }
      buildSimpleContent(s.end.element,s.end.org,s.result)
    }
    return s
    
    function buildTests(v,level,startTime,endTime,bz,test){
      let html=""
      let ts=analyzer.getTestTreeByLevel(v,level),curTest,tt,lastTest;
      
      ts.forEach((t,i)=>{
        if(i%2==0){
          tt=formatter.splitByWord(v,t)
          v=tt[1]
          curTest=retrieveTestData(t)
          curTest.start=formatter.retrieveTimeFromLog(v)
          html+=buildActions(tt[0],startTime,curTest.start,bz,!i&&test)
          
          fd.testMap[curTest.code]=curTest
        }else{
          if(t.match(/\<+ Failed /)){
            curTest.result="failed"
          }
          tt=formatter.splitByWord(v,t,1)
          startTime=formatter.retrieveTimeFromLog(tt[1])||endTime
          curTest.time=formatter.getSpendTime(curTest.start,startTime,"testTime")
          curTest.details=buildTests(tt[0],level+1,curTest.start,startTime,curTest.bz,curTest)
          html+=formatter.getGroupElement(curTest)
          delete curTest.details
          v=tt[1]
          lastTest=curTest
        }
      })
      return html+buildActions(v,startTime,endTime,bz,!ts.length&&test,test&&test.result=="failed")
      
    }
    
    function retrieveTestData(v){
      let x=v.match(/^([0-9]+)\: +\>+ Loading (.*Test) \[(m[0-9]+\.t[0-9]+)(\(([0-9]+)\))?\] - (.+) \([0-9:]+\) \>+$/);
      if(x){
        return {
          code:"test"+formatter.getIdx(),
          type:"test",
          name:"["+x[3]+"] "+x[6],
          idx:parseInt(x[1]),
          result:"success",
          tests:[],
          level:"test",
          bz:x[3],
          init:{
            time:"0s"
          }
        }
      }
    }
    
    function buildActions(v,startTime,endTime,bz,test,inFailed){
      if(!v.includes("bz-json-validation")){
        v=(v||"").replace(/</g,"&lt;").replace(/>/g,"&gt;")
      }
      let as=(v||"".trim()).match(/(\n|^)[0-9]+\: ##Action.+$/gm),lastAction;
      if(!inFailed&&v.match(/[0-9]+: (failed test|Load page error): /)){
        inFailed=1
      }
      if(as){
        as=as.map((a,j)=>{
          a=a.trim()
          if(j){
            if(a.replace(/^[0-9]+:/,"")==as[j-1].trim().replace(/^[0-9]+:/,"")){
              return
            }
          }
          return {k:a}
        }).filter(x=>x)
        as.forEach(a=>{
          let wa=formatter.splitByWord(v,a.k)
          v=a.c=wa[1].trim()
          if(lastAction){
            lastAction.c=wa[0].trim()
          }else if(test){
            test.init.details=formatter.strToHtml(wa[0])
            startTime=formatter.retrieveTimeFromLog(v)
            test.init.time=formatter.getSpendTime(test.start,startTime,"initTime")
          }
          lastAction=a
        })
        as=as.map(a=>retrieveActionData(a.k,a.c,bz))
        as.forEach((a,i)=>{
          a.details=a.details.split("\n").filter(x=>x&&!isIgnoreContent(x))
          a.details.shift()
          
          if(a.details.length==1&&formatter.retrieveTimeFromLog(a.details[0])){
            a.details=""
          }else{
            if(i==as.length-1&&inFailed){
              a.result="failed"
            }
            a.details=formatter.strToHtml(a.details,inFailed&&i==as.length-1&&"screenshot")
          }
          if(i){
            as[i-1].time=formatter.getSpendTime(as[i-1].start,a.start,"actionTime")
            a.start=a.start||as[i-1].start
          }else{
            a.start=startTime||a.start
          }
        })
        as[as.length-1].time=formatter.getSpendTime(as[as.length-1].start,endTime,"actionTime")
        let r=as.map(a=>formatter.getGroupElement(a)).join("")
        as.forEach(a=>{
          delete a.details
        })
        return r
      }
      return ""
    }
    
    function getTimeout(v){
      v=v.match(/[0-9]+: (timeout in ms:([0-9]+))/)||""
      if(v&&v[2]!="0"){
        v=" (‚è± "+v[1]+")"
      }else{
        v=""
      }
      return v
    }

    function isIgnoreContent(x){
      return x.match(/[0-9]+: (timeout in ms:[0-9]+| +>+| +<+|.+\/api\/coop\/.+|End time\:|Start time\: [0-9\:\- ]+)$/)
    }

    function retrieveActionData(v,p,testbz){
      let x=v.match(/^([0-9]+)\: \#\#Action.*\#\# \(([0-9\/mt]+|tmp)\)\, (.+)/)

      let name=x[3],type,flash,screenshot;
      if(name.match(/^(Set |Typing |Check )/)){
        type="keyboard"
      }else{
        type=name.split(/[ :]/)[0].toLowerCase()
        if(type.match(/validate/)){
          type="validate"
        }else if(type=="group"){
          if(v.includes("Auto-one-action-group")){
            flash=1
          }
        }else if(type=="script"){
          if(v.includes("attachScreenshotToReport")){
            screenshot=1
          }
        }else if(type.match(/^(double|click|extract|refresh|call)( |$)/)){
          
        }else if(type.match(/execute api/)){
          type="api"
        }else if(type.match(/Re-Initialize/i)){
          type="refresh"
        }else{
          type="call"
        }
        if(v.includes("in Single action group")){
          flash=1
        }
      }
      
      let idx=x[2].split("/").pop(),
          timeout=getTimeout(p)
      return {
        code:"action-"+formatter.getIdx(),
        name:`(${idx}) ${name}`+timeout,
        type:type,
        result:"success",
        start:formatter.retrieveTimeFromLog(p),
        details:p,
        level:"action",
        bz:testbz+"/"+idx
      }
    }
    
    function buildSimpleContent(e,v,mark){
      e.html(formatter.strToHtml(v,mark))
    }
  },
  getSpendTime:function(st,et,ckKey){
    if(!et){
      return 0
    }
    et=formatter.strToTime(et)-formatter.strToTime(st)
    if(et<0){
      et= 0
    }
    if(ckKey&&et>formatter.data.setting[ckKey]){
      et+="s <span class='bz-mini-letter'>‚ö†Ô∏è</span>"
    }else{
      et+="s"
    }
      
    return et
  },
  retrieveTimeFromLog:function(v){
    v=v.match(/\[ ([0-9\:]+) (\(([0-9\:]+), ([0-9]+)s\) \++) *\]/)||[]
    let fd=formatter.data,t=fd.exeTime||""
    v=v[3]||""
    
    if(v.length>t.length||(v.length==t.length&&v>t)){
      fd.exeTime=v
    }
    formatter.element.header.find(".bz-timer").text(fd.exeTime+` (${parseInt((fd.successScenarios+fd.failedScenarios)/(fd.totalScenarios||(fd.successScenarios+fd.failedScenarios))*100)}%)`)
    return v
  },
  splitByWord:function(v,k,keepKeyInFirst){
    if(k.constructor!=String){
      k=v.match(k)
      if(k){
        k=k[0]
      }else{
        return
      }
    }
    let s=k.length
    k=v.indexOf(k)
    if(keepKeyInFirst){
      k+=s
    }
    return [v.substring(0,k).trim(),v.substring(k).trim()]
  },
  strToTime:function(s){
    s=s||"0"
    let v=0,p=[3600,60,1]
    s=s.split(":")
    while(s.length){
      v+=s.pop()*p.pop()
    }
    return v
  },
  openIDE:function(v){
    let fd=formatter.data
    formatter.openWindow(fd.host+"/extension?id="+fd.project.code+"#"+fd.project.code+"/"+fd.version+"/"+v.replace(".","/"),"bz-master",`width=${screen.availWidth/2},height=${screen.availHeight}`)
  },
  getPageInfo:function(x,sendResponse){
    let c=$("a[href=consoleFull]")[0]
    let o=$(".console-output")[0]
    sendResponse({
      full:c&&1,
      log:o&&1,
      pop:1
    })
  },
  removeDoingInfo:function(){
    let o=document.getElementsByClassName("bz-loading-info")[0]
    if(o){
      o.remove()
    }
  },
  showDoing:function(v){
    let o=document.getElementsByClassName("bz-doing-text")[0]
    if(o){
      o.innerText=v
      return
    }
    o=document.createElement("div");
    o.className="bz-loading-info"
    o.style.position="fixed";
    o.style.top="30px";
    o.style.right="15px";
    o.style.zIndex=100000;
    o.style.backgroundColor="#FFF"
    o.style.border="5px solid #00F"
    o.style.borderRadius="10px";
    o.style.padding="20px 30px";
    o.style.fontSize="25px";
    o.style.display="flex";

    o.innerHTML=`
        <div class="bz-icon bz-running"></div>
        <div class="bz-doing-text" style="line-height:45px;">${v}</div>
    `;
    formatter.loadingInfo=o
    document.body.append(o)
    return 1
  },
  getSetting:function(){
    let v;
    try{
      v=localStorage.getItem("bz-log-format");
      if(v){
        v=JSON.parse(v)
      }
    }catch(e){}
    v=v||{}
    if(!v.scenarioTime){
      v.scenarioTime=180
      v.testTime=60
    }
    
    v.account=v.account||{}
    return v
  },
  autoLoading:function(){
    let v=formatter.getSetting();
    if(v.autoFormat){
      if(formatter.isMasterPage(v)){
        return formatter.exeFormag(v,Date.now())
      }
    }
    formatter.chkXray(v)
  },
  chkXray:function(v){
    v=v||formatter.getSetting();
    if(v&&v.account&&v.account.xray&&location.href.includes(v.account.xray)){
      let vv=location.href.match(/(\/browse[\/]|\&selectedIssue=|\&issueKey=)([^&\/]+)/)
      if(vv){
        vv=vv[2]
        vv=vv.replace("/","")
        if((v.account.tags||{})[vv]){
          formatter.formatXray(v.account.tags[vv])
        }
      }
    }
  },
  formatXray:function(k,ok){
    setTimeout(()=>{
      if($("#bz-play")[0]){
        return
      }
      let d=formatter.getSetting().account;
      let host=d.server
      if(host=="oth"){
        host=d.othServer
      }
      if(window.$){
        if(!ok){
          return formatter.formatXray(k,1)
        }
        let o=$("[data-testid=xray-test-type-select]")[0]
        if(!o){
          return
        }
        o=o.parentElement.parentElement.parentElement
        o=$(`
        <span style="position: absolute;right: 0;z-index: 100000000000;margin-top:25px;">
          <button id='bz-play' title='Execute the scenario in Jenkins' style='${d.jk?'':'display:none;'}background-image: url(${host}/ci/jk.ico);height: 20px;width: 20px;background-size: 15px;border: 0;background-repeat: no-repeat;background-position: center;background-color: transparent;float: right;margin: 3px;color:red;font-size: 10px;padding-top: 5px;padding-left: 23px;'>‚ñ∂</button>
          <button id='bz-ide' title='Open the scenario in Boozang IDE' style='background-image: url(${host}/favicon.ico);height: 20px;width: 20px;background-size: 15px;border: 0;background-repeat: no-repeat;background-position: center;background-color: transparent;float: right;margin: 5px;'></button>
        </span><div class='bz-pop-panel' style='display:none;position: absolute;margin-top: 50px;right: 0;background-color: rgb(255, 255, 255);padding: 20px 5px 5px;border-radius: 5px;border: 1px solid rgb(153, 153, 153);z-index: 10;box-shadow: rgb(0 0 0 / 40%) 2px 2px 9px;background-position: right 5px top 5px;background-size: 11px;z-index: 1111111111;'><div class='bz-box'></div></div>`).insertAfter(o.parentElement)
        let url=formatter.joinUrl(host,"extension?id="+d.project+"#"+d.project,d.version,k)
        o.find("#bz-play").click(function(e){
          e.stopPropagation()
          
          formatter.doJKPlay([k],d.version,d.jk,d.jkJob,60)
        })
        o.find("#bz-ide").click(function(e){
          e.stopPropagation()
          formatter.openWindow(url)
        })
        o.find("#bz-ide,#bz-play").focus(function(){
          $(this).blur()
        })
      }else{
        formatter.formatXray(k,ok)
      }
    },1000)
  },
  joinUrl:function(){
    return Object.values(arguments).map(x=>x.replace(/\/$/,"")).join("/")
  },
  isMasterPage:function(v){
    if(v.identifyMaster){
      try{
        let f;
        eval("f="+v.identifyMaster)
        return f()
      }catch(ex){
        alert("Identify page script issue: "+ex.message)
      }
    }
  },
  copyText:function(w){
    let el =$("<textarea readonly style='position:absolute;left:-9999px'></textarea>").appendTo(document.body);
    let v=(w.innerText||"").replace(/^[0-9]+\: /,"")
    let vv=v.match(/https?:\/\/.+/)
    v=vv?vv[0]:v
    el.val(v)
    el.select();
    document.execCommand('copy');
    el.remove();


    let _range = new Range(),
        _sel = w.ownerDocument.defaultView.getSelection();
        _sel.removeAllRanges();
        _range.collapse(true);
    _range.setStart(w, 0);
    _range.setEnd(w, 1);
    _sel.addRange(_range);
    setTimeout(()=>{
      _sel.removeAllRanges();
    },100)
  },
  download:function(){
    let os=Object.values(formatter.data.scenarioMap)
    os=os.filter(x=>$("#"+x.code).css("display")!="none").sort((a,b)=>{
      return a.idx-b.idx
    })
    let w=os.map(x=>{
      return x.declare.org.trim()+"\n"+x.init.org.trim()+"\n"+x.details.org.trim()+"\n"+x.end.org.trim()
    }).join("\n")
    w=formatter.data.project.init.org.trim()+"\n"+w+"\n"+formatter.data.project.end.org
    w=`<!DOCTYPE html>
       <html>
       <head><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'></head>
       <body>
       <pre>${w}</pre>
       </body>
       </html>`;
    var a=$("<a></a>");
    $(document.body).append(a[0]);
    a.attr("download","Boozang-log.html").attr("href","data:application/octet-stream," + encodeURIComponent(w))[0].click();
    a.remove();
  },
  loadTextFromFiles:function(_files,_fun){
    let _reader = new FileReader(),
        rs=[];
    

    function _readFile(i) {
      if( i >= _files.length ) {
        return _fun(rs);
      }
      var _file = _files[i];
      _reader.onload = function(e) {  
        rs.push(e.target.result);
        _readFile(i+1)
      }
      _reader.readAsText(_file);
    }
    _readFile(0);

    _reader.onerror = function() {
      alert(_bzMessage._system._error._importFileError,_reader.error);
    };
  },
  getCameraPath:function(v){
    let fd=formatter.data
    return fd.host+"/screenshot/"+fd.project.code+"/"+v+".jpg"
  },
  showCompare:function(){
    let o=$(".bz-pop-panel");
    if(o.attr("type")=="compare"){
      return o.show()
    }else{
      o.attr({type:"compare"})
    }
    o.find("div.bz-box").html(`
      <div class="bz-row-high">
        <label><input checked type="radio" value="net-scope" name="load"/>Load log files from network</label>
      </div>
      <div class="bz-row-high load-option" id="net-scope">
        <label style="margin-left:20px;">Log URL/No.<input type="text" id="net-log" placeholder="Split by comma to compare multiple logs"/></label>
      </div>
      <div class="bz-row-high">
        <label><input type="radio" name="load" value="file-scope"/>Load log files from local</label>
      </div>
      <div class="bz-row-high load-option" id="file-scope" style="display:none">
        <input type="file" id="file-log" multiple/>
      </div>
      <div class="bz-row-high" style="margin-top:10px;text-align:center;">
        <button id="compare-btn" class="std">Compare</button>
      </div>`)
    setTimeout(()=>{
      $("input#net-log").focus()
    },100)
    $("#net-log").keydown(function(e){
      if(e.keyCode==13){
        doCompare()
      }
    })
    $("input[type=file]").change(function(){
      let idx=1
      formatter.data.errHashMap={}
      formatter.loadTextFromFiles(this.files,function(fs){
        if(fs){
          analyzeLogs([{
            key:idx++,
            list:fs
          }])
        }
      })
    })
    $("#compare-btn").click(()=>{
      doCompare()
    })
    $("[name=load]").click(function(){
      $(".load-option").hide()
      $("#"+this.value).show()
    })
    o.show()
    function doCompare(){
      if($("[name=load]:checked").val()=="net-scope"){
        loadFromNet()
      }else{
        compare()
      }
    }
    
    function compare(vs){
      analyzer.doAnalysis(vs)
    }
    
    function mergeModuledata(vs){
      
    }

    function loadFromNet(){
      let vs=$("#net-log").val().split(",")
      vs=vs.map(x=>{
        if($.isNumeric(x)){
          return {
            key:x,
            list:[]
          }
        }else{
          return {
            key:1,
            url:x,
            list:[]
          }
        }
      })
      loadLogs(vs,0,function(){
        formatter.data.errHashMap={}
        analyzeLogs(vs)
      })
    }
    
    function loadLogs(vs,i,fun){
      let v=vs[i]
      if(v){
        let masterUrl=v.url||location.href.replace(/\/[0-9]+[\/]/,"/"+v.key+"/")
        loadLogByUrl(masterUrl,function(vv){
          if(!vv){
            return alert("Load log failed! Please be sure the url/no. is correct.")
          }
          v.list.push(vv)
          if(!v.url){
            vv=formatter.getLogList(masterUrl)
            loadPages(vv,0,function(vvv){
              v.list.push(...vvv)
              loadLogs(vs,i+1,fun)
            })
          }else{
            fun(vs)
          }
        })
      }else{
        fun(vs)
      }
    }
    
    function loadPages(vs,i,fun){
      let v=vs[i]
      if(v){
        loadLogByUrl(v,function(r){
          vs[i]=r;
          loadPages(vs,i+1,fun)
        })
      }else{
        fun(vs)
      }
    }
    
    function loadLogByUrl(v,fun){
      formatter.showDoing("Loading log ...")
      $.ajax({
        method:"GET",
        url:v,
        success:function(r){
          fun(r)
          formatter.removeDoingInfo()
        }
      })
    }
    
    function analyzeLogs(vs){
      try{
        vs.forEach(x=>{
          let v=x.list.join("\n")
          x.list={}
          Object.values(formatter.data.errHashMap).forEach(y=>{
            delete y[x.key]
          })
          
          let ts=analyzer.getTestTreeByLevel(v,0)
          ts=ts.map((y,i)=>{
            if(i%2){
              return {start:ts[i-1],end:ts[i]}
            }
          }).filter(x=>x).forEach(y=>{
            let s=y.end.match(/<+ ([^ ]+) [^\[]+(\[((m[0-9]+).(t[0-9]+))\(?([0-9]+)?\)?\] )([0-9:]+) ([^<]+) Tasks:/)
            s={
              result:s[1].toLowerCase(),
              title:s[2]+" "+s[8],
              code:s[3],
              m:s[4],
              t:s[5],
              idx:parseInt(s[6]||0),
              name:s[8],
              start:y.start.match(/\(([0-9:]+)\) >>>>$/)[1],
              end:s[7]
            }
            s.time=parseInt(formatter.getSpendTime(s.start,s.end))
            y=v.split(y.end)
            v=y[1]
            if(s.result!="stopped"){
              analyzer.addAnalyzeData(x.list,s,formatter.data.scenarioAnaMap,x.key);
              // formatter.data.scenarioAnaMap[s.code].nodes[s.idx].term[x.key]=s
              
              analyzer.retrieveAnalyzeData(x.key,x.list,y[0],1,s)
              if(s.result=="failed"){
                analyzer.retrieveErrHash(x.key,y[1])
              }
            }
          })
        })
        compare(vs)
      }catch(ex){
        console.log(ex.stack)
        alert(ex.message)
      }
    }
  },
  showCameraPanel:function(){
    let o=$(".bz-pop-panel")
    if(o.attr("type")=="camera"){
      return o.show()
    }else{
      o.attr({type:"camera"})
    }
    let w=""
    formatter.cameraList.forEach(x=>{
      w+=`<div class='bz-row bz-title-text' style='margin:5px 0'><img class='bz-mini-img' src='${formatter.getCameraPath(x)}'/> ${x}</div>`
    })
    o.find("div.bz-box").html(`<div style='overflow:auto;max-height:${window.innerHeight-250}px;padding:5px;background-color:#EEE;'>${w}<div>`)
    o.find("img").click(function(){
      formatter.openWindow(this.src,"_blank")
    })
    o.show()
  },
  sort:function(o){
    let k=o[0].id.split("-").pop(),w=1
    if(o.hasClass("bz-z-a")){
      o.removeClass("bz-z-a")
      o.addClass("bz-a-z")
    }else if(o.hasClass("bz-a-z")){
      o.removeClass("bz-a-z")
      o.addClass("bz-z-a")
      w=-1
    }else{
      let os=$(".bz-sort-bar button")
      os.removeClass("bz-a-z")
      os.removeClass("bz-z-a")
      o.addClass("bz-a-z")
    }
    

    let os=formatter.element.panel.children().sort((a,b)=>{
      a=formatter.data.scenarioMap[a.id]
      b=formatter.data.scenarioMap[b.id]

      if(k=="idx"||k=="time"){
        return parseInt(a[k]||0)>parseInt(b[k]||0)?w:0-w
      }else{
        return a[k]>b[k]?w:0-w
      }
    })
    formatter.element.panel.append(os)
    document.documentElement.scrollTop=0
  },
  getWorkerSize:function(os){
    try{
      let ws=new Set(os.map(x=>{
        return x.code.split("-").pop()
      }))
      return [...ws].length
    }catch(ex){
    }
    return 1
  },
  doPlay:function(){
    let os=[];
    $(".bz-chk-replay:checked").toArray().filter(x=>x.getBoundingClientRect().width).forEach(x=>{
      while(!$(x).hasClass("bz-level-scenario")&&x.tagName!="BODY"){
        x=x.parentElement
      }
      x=formatter.data.scenarioMap[x.id]
      os.push(x)
    })
    formatter.doJKPlay(os,formatter.data.version,"//"+location.host,location.pathname.split("/")[2],formatter.data.testreset)
  },
  doJKPlay:function(os,version,host,p,testreset){
    let o=$(".bz-pop-panel"),
        tn=decodeURI(p),
        ws=formatter.getWorkerSize(os)
    o.attr({type:"play"})
    
    o.find(".bz-box").html(`
      <div style="padding:0 10px;${os[0].constructor==String?'display:none':''}">Do you want to play the below selected scenarios?</div>
      <fieldset style="margin:5px 5px 10px 5px;${os[0].constructor==String?'display:none':''}">
        <legend>Scenario list</legend>
        <div class='bz-play-list'>
          <div>${os.map(x=>x.title).join("</div><div>")}</div>
        </div>
      </fieldset>
      <div class="bz-form" style='margin:5px'>
        <div style="margin:5px;"><label style="display:flex;"><span style="flex:1;margin-right:5px;">Job</span><input style="flex:3;border:1px solid #CCC;padding:5px;" id="task" value="${tn}"/></label></div>
        <div style="margin:5px;"><label style="display:flex;"><span style="flex:1;margin-right:5px;">Branch</span><input style="flex:3;border:1px solid #CCC;padding:5px;" id="branch" value="${version}"/></label></div>
        <div style="margin:5px;"><label style="display:flex;"><span style="flex:1;margin-right:5px;">Workers</span><input style="flex:3;border:1px solid #CCC;padding:5px;" id="workers" value="${ws}"/></label></div>
      </div>
      <div style="text-align: center;margin: 15px 0 10px 0;">
        <button class='bz-play-btn std' style='border-radius: 10px;background-color: #33F;color: #FFF;border: 1px solid #33F;padding: 2px 15px;line-height: 20px;cursor: pointer;'>Start</button>
        <button class='bz-cancel' style='border-radius: 10px;background-color: #FFF;border: 1px solid #33F;padding: 2px 15px;line-height: 20px;cursor: pointer;'>Cancel</button>
      </div>
    `)
    o.show()
    o.mousedown(function(e){
      e.stopPropagation()
    })
    
    $(".bz-cancel").click(function(){
      $(".bz-pop-panel").hide()
    })
    
    $(".bz-play-btn").click(function(){
      let d={
        parameter:[
          {
            name:"workers",
            value:$("#workers").val(),
          },
          {
            "name": "test", 
            "value": os.map(x=>{
                      x=(x.code||x).split("-")
                      while(x.length>2){
                        x.pop()
                      }
                      return x.join(".")
                    }).join(",")
          }, 
          {
            "name": "loglevel", 
            "value": "debug"
          }, 
          {
            "name": "testreset", 
            "value": testreset
          }, 
          {
            "name": "branch", 
            "value": $("#branch").val()
          }
        ],
        statusCode: "303", 
        redirectTo: "."
      }
      startWorks(d,encodeURI($("#task").val()))
    })
    function startWorks(d,pn){
      o.find(".bz-box").html(`<form method="post" target="_blank" name="parameters" action='${host}/job/${pn}/build?delay=0sec'>
      ${d.parameter.map(x=>`<div name="parameter"><input name='name' type='hidden' value="${x.name}"/><input name='value' type='hidden' value="${x.value}"/></div>`)}
      <input name='statusCode' type='hidden' value="303"/>
      <input name='redirectTo' type='hidden' value="."/>
      <input type="hidden" name="json" value="init"/>
      <span name="name">
        <button type="button">Build</button>
      </span>
      </form>`)
      $(".bz-box input[name=json]").val(JSON.stringify(d))
      $(".bz-box form").submit()
      o.find(".bz-box").html("")
      o.hide()
    }
  },
  search:function(v,scope){
    $(".bz-search-input").val(v)
    let fd=formatter.data
    if(formatter.searching){
      return
    }
    formatter.searching=1
    formatter.showFailedOnlyResult()
    if(!v){
      formatter.searching=0
      formatter.removeAllHighlight()
      return formatter.closeAll()
    }
    formatter.showDoing("Searching ...")
    document.documentElement.scrollTop=0

    return setTimeout(()=>{
      doSearch(v,scope)
    })
    
    
    function doSearch(){
      try{
        if(v[0]!='"'&&v[0]!="'"){
          if(v.match(/^[\/].+[\/][i]?$/)){
            v=eval(v)
          }else{
            v=v.toLowerCase().split(",")
          }
        }else{
          v=JSON.parse(v).toLowerCase()
        }
      }catch(ex){
        v=v.toLowerCase().split(",")
        alert("This is not a correct regular expression!")
      }
      preFilter(v)

      if(v&&v.constructor==Array&&v.length==1&&v[0].constructor==String){
        if(v[0].match(/^[a-f0-9]{32}$/)){
          formatter.removeDoingInfo()
          formatter.searching=0
          $(".bz-result.bz-failed").toArray().find(x=>{
            if(x.getBoundingClientRect().width){
              $(x).click()
              return 1
            }
          })
          formatter.chkReplay()
          return
        }
      }
      formatter.removeAllHighlight()
      if(!scope){
        scope=[formatter.element.init,...formatter.element.panel.find(".bz-level-scenario").toArray().filter(x=>$(x).css("display")!="none"),formatter.element.end]
      }
      let vs=[],inModuleFilter,mf=[];
      
      if(v.constructor==Array&&v[0].match(/^m[0-9]+([\.\/]t[0-9])?$/)){
        scope.forEach(x=>{
          x=$(x).find(".bz-line,.bz-title-text").toArray()
          x.forEach(y=>{
            let pos=y.innerHTML.indexOf(v[0])
            if(pos>=0){
              mf.push({pos:pos,w:v[0],element:y})
              vs.push(y)
            }
          })
        })
        v.shift()
        scope=[]
        vs.forEach(x=>{
          if($(x).hasClass("bz-title-text")){
            scope.push(...$(x.parentElement.nextElementSibling).find(".bz-line,.bz-title-text,.bz-time,button").toArray())
          }
        })
        inModuleFilter=1
      }
      
      scope.forEach(x=>{
        if(inModuleFilter){
          x=[x]
        }else{
          x=$(x).find(".bz-line,.bz-title-text,.bz-time,button").toArray()
        }
        x.forEach(y=>{
          if(v.constructor==Array){
            let fs=[]
            mf.find((q,qi)=>{
              if(q.element==y){
                fs.push(q)
                mf.splice(qi,1)
                return 1
              }
            })
            v.forEach((z,j)=>{
              let zz=z.split(" "),fz=[]
              if(!zz.find(zi=>{
                if(!zi){
                  return
                }

                let pos=y.innerHTML.toLowerCase().indexOf(zi)
                if(pos>=0){
                  fz.push({pos:pos,w:zi})
                }else{
                  return 1
                }
              })){
                fs.push(...fz)
              }
            })
            if(fs.length){
              fs.sort((a,b)=>{
                return b.pos-a.pos
              })
              fs.forEach(z=>{
                formatter.highlight(y,z.w,z.pos)
              })
              vs.push(y)
            }
          }else if(v.constructor==String){
            let pos=y.innerHTML.toLowerCase().indexOf(v)
            if(pos>=0){
              formatter.highlight(y,v,pos)
              vs.push(y)
            }
          }else{
            let w=y.innerHTML.match(v)
            if(w){
              w=w[0]
              let pos=y.innerHTML.indexOf(w)
              formatter.highlight(y,w,pos)
              vs.push(y)
            }
          }
        })
      })
      mf.forEach(x=>{
        formatter.highlight(x.element,x.w,x.pos)
      })
      formatter.closeAll()
      vs.forEach(x=>{
        formatter.openItem(x)
      })
      vs=$(".bz-line,.bz-level-action").toArray()
      vs.forEach(x=>{
        if(!$(x).find(".bz-search-highlight")[0]){
          $(x).hide()
        }
      })

      formatter.element.panel.children().toArray().forEach(x=>{
        if(!$(x).find(".bz-search-highlight").length){
          $(x).hide()
        }
      })

      formatter.removeDoingInfo()
      formatter.searching=0
      formatter.chkReplay()
    }
    
    function preFilter(v){
      let os=Object.values(fd.scenarioMap).filter(x=>x.result=="failed"||!fd.failedOnly)

      if(v.constructor==Array){
        v=v.map((x,i)=>{
          let xx;
          if(!i){
            xx=x.match(/(scenario|test) (.+)/)
            if(xx){
              v[i]=xx[1]
              xx="Loading .+ ("+xx[1].replace(/ /g,"|")+")"
            }else{
              xx=x.match(/(m[0-9]+[\.\/]t[0-9]+)(.*)/)
              if(xx){
                v[i]=xx[1]
                let xxx=(xx[2]||"").trim()
                xx="Loading .+ \\["+xx[1]
                if(xxx){
                  v.splice(i+1,0,xxx)
                }
              }
            }
            if(xx){
              eval("xx=/"+xx+"/i")
              os=os.filter(x=>{
                if(!foundTxt(x,xx)){
                  formatter.hideScenario(x)
                }else{
                  return 1
                }
              })
            }else{
              xx=x.match(/action[: ](.+)/)
              if(xx){
                v[i]=xx[1]
                xx=xx[1].split(" ").sort((a,b)=>a.length-b.length).pop()
                xx="##Action[^#]*## .*"+xx

                eval("xx=/"+xx+"/i")
                os=os.filter(x=>{
                  if(!x.details.org.match(xx)){
                    formatter.hideScenario(x)
                  }else{
                    return 1
                  }
                })
              }
            }
          }
          if(!xx){
            x=x.split(" ")
            x.sort((a,b)=>b.length-a.length)
            return x[0].replace(/([^a-z0-9])/gi,"\\$1")
          }
        }).filter(x=>x).join("|")
        if(v){
          eval("v=/"+v+"/i")
        }
      }else if(v.constructor==String){
        os=os.filter(x=>{
          if(includeTxt(x,v)){
            return 1
          }else{
            formatter.hideScenario(x)
          }
        })
        v=0
      }
      if(v){
        os=os.filter(x=>{
          if(!foundTxt(x,v)){
            formatter.hideScenario(x)
          }else{
            return 1
          }
        })
      }
      formatter.buildAllDetails(os.map(x=>x.code))
    }
    
    function foundTxt(x,f){
      if(x.title.match(f)){
        return 1
      }
      if(x.init.org){
        if(x.init.org.match(f)){
          return 1
        }
      }
      if(x.declare.org){
        if(x.declare.org.match(f)){
          return 1
        }
      }
      if(x.details.org){
        if(x.details.org.match(f)){
          return 1
        }
      }
      if(x.end.org){
        if(x.end.org.match(f)){
          return 1
        }
      }else if(x.org){
        return x.org.match(f)
      }
    }

    function includeTxt(x,f){
      if(x.title.toLowerCase().includes(f)){
        return 1
      }
      if((x.init.org||"").toLowerCase().includes(f)){
        return 1
      }
      if((x.declare.org||"").toLowerCase().includes(f)){
        return 1
      }
      if((x.details.org||"").toLowerCase().includes(f)){
        return 1
      }
      if(x.end.org){
        if(x.end.org.toLowerCase().includes(f)){
          return 1
        }
      }else if(x.org){
        return x.org.toLowerCase().includes(f)
      }
    }
  },
  hideScenario:function(o){
    if(o.element){
      o.details.element.html("");
      o.init.panel.innerHTML=""
      o.declare.panel.innerHTML=""
      o.end.element.html("")
      o.switcher.removeClass("bz-open")
      $(o.element.find(".bz-panel")[0]).hide()
      o.element.find(".bz-level-init,.bz-level-declare").addClass("bz-hide")
      o.element=0
    }
    $("#"+o.code).hide()
  },
  removeAllHighlight:function(){
    let os=$(".bz-search-highlight").toArray()
    os.forEach(x=>{
      if(x.parentElement){
        x.parentElement.innerHTML=x.parentElement.innerHTML=x.parentElement.innerText
      }
    })
  },
  highlight:function(o,v,pos){
    let w=$(o).html()
    v=w.substring(pos,pos+v.length)
    w=w.replace(v,`<span class='bz-search-highlight'>${v}</span>`)
    $(o).html(w)
  },
  closeAll:function(){
    $(".bz-scope .bz-switch.bz-open,.bz-scope .bz-cross.bz-open").click()
  },
  openItem:function(v){
    try{
      while(!$(v).hasClass("bz-level-scenario")){
        if($(v).hasClass("bz-hide")){
          $(v).removeClass("bz-hide")
        }else if($(v).css("display")=="none"){
          $(v).show()
        }
        if($(v).hasClass("bz-panel")){
          $(v.previousElementSibling).find(".bz-switch").addClass("bz-open")
        }
        v=v.parentElement
      }
    }catch(e){}
  },
  keepLogMap:function(k){
    formatter.logMap[k]=formatter.logMap[k]||{}
    formatter.logMap[k].curLastScenario=formatter.data.curLastScenario
    formatter.logMap[k].curEnd=formatter.data.curEnd
  },
  takeLogMap:function(k){
    formatter.logMap[k]=formatter.logMap[k]||{}
    formatter.data.curLastScenario=formatter.logMap[k].curLastScenario
    formatter.data.curEnd=formatter.logMap[k].curEnd
    formatter.data.curWorker=k
  },
  getIdx:function(){
    return formatter.idx++
  }
};

var analyzer={
  setting:{
    percentage:0.1,
    second:5,
    missTest:1,
    diffResult:1,
    diffScenario:1,
    tab:"scenario"
  },
  //mp: module map, ap: analysis map, ct: scenario/test
  addAnalyzeData:function(mp,ct,ap,key){
    let d=createNode(mp,ct.m,{testMap:{}})
    d=createNode(d.testMap,ct.t,{list:[]})
    if(ct.scenario){
      d.list.unshift(ct)
    }else{
      d.list.push(ct)
    }

    if(ap){
      let d=createNode(ap,ct.code,{
        name:ct.name,
        code:ct.code,
        type:"scenario",
        nodes:[]
      })
      d=createNode(d.nodes,ct.idx,{code:ct.idx,term:{},nodes:[]})
      d.term[key]={
        result:ct.result,
        time:parseInt(ct.time)
      }
    }
    
    function createNode(p,k,o){
      p[k]=p[k]||o
      return p[k]
    }
  },
  retrieveAnalyzeData:function(term,mp,log,level,scenario){
    //last level list
    let lls,cls
    while(1){
      let ts=analyzer.getTestTreeByLevel(log,level++),ct,lt,lts=0
      if(!ts.length){
        break
      }
      lls=cls
      cls=[]
      for(let i=0;i<ts.length;i++){
        let t=ts[i]
        if(!ct){
          let c=t.match(/([0-9]+)[^\[]+\[(m[0-9]+)\.(t[0-9]+).*\] - (.+) \(([0-9:]+)\) >>>>$/)
          if(!c){
            return alert("Analyze data failed! Please report the issue to Boozang customer support. Thanks!")
          }
          ct={
            startLine:parseInt(c[1]),
            m:c[2],
            t:c[3],
            code:c[2]+"."+c[3],
            name:c[4],
            start:c[5],
            from:scenario.code,
            scenario:!level
          }
        }else{
          let c=t.match(/([0-9]+): +<<<< ([^ ]+) [^\]]+\] ([0-9:]+) [^<]+ <<<</s),
              m=ct.m
          if(!c){
            i--
            ct.stop=1
            ct=0
            continue
          }
          ct.endLine=parseInt(c[1]),
          ct.end=c[3]
          ct.result=c[2].toLowerCase()
          
          ct.time=parseInt(formatter.getSpendTime(ct.start,ct.end))
          
          if(ct.time>formatter.data.setting.testTime){
            ct.slow=scenario.key
          }
          //check repeat
          if(lt&&lt.code==ct.code&&lt.from==ct.from){
            lts++
            if(lts>5){
              ct.repeat=scenario.key
            }
          }else{
            lts=0
            lt=ct
          }
          
          let ns

          if(lls&&lls.length){
            while(lls[0].endLine<ct.startLine){
              lls.shift()
              if(!lls.length){
                return
              }
            }
            if(lls[0].startLine<ct.startLine){
              ns=lls[0].nodes
            }
          }else{
            ns=formatter.data.scenarioAnaMap[scenario.code].nodes[scenario.idx].nodes
          }
          let d={code:ct.code,name:ct.name,nodes:[],term:{}};
          d.term[term]={
            result:ct.result,
            time:parseInt(ct.time)
          }

          if(!ns.find(x=>{
            if(!x.term[term]&&x.code==ct.code){
              x.term[term]=d.term[term]
              ct.nodes=x.nodes
              return 1
            }
          })){
            if(!ns.find((x,j)=>{
              if(!x.term[term]){
                ns.splice(j,0,d)
                return 1
              }
            })){
              ns.push(d)
            }
            ct.nodes=d.nodes
          }

          cls.push(ct)
          analyzer.addAnalyzeData(mp,ct)

          ct=0
        }
      }
    }
    return 1
  },
  doAnalysis:function(compare){
    let fd=formatter.data,
        o=$(".bz-pop-panel")
        
    if(o.attr("type")=="analyze"){
      if(compare){
        o.attr({type:"compare"})
      }else{
        return o.show()
      }
    }else if(!compare){
      o.attr({type:"analyze"})
    }
    if(!compare){
      fd.scenarioAnaMap={}
    }
    analyzer.moduleData={}
    analyzer.buildMasterAnalysisData()
    analyzer.buildModuleData("master",fd.moduleMap);
    if(compare){
      compare.forEach(x=>{
        analyzer.buildModuleData(x.key,x.list)
      })
      analyzer.curCompareTabs=compare.map(x=>x.key)
      analyzer.curCompareTabs.unshift("master")
      
      
    }else{
      analyzer.curCompareTabs=0
    }
    
    analyzer.showAnalyzePanel(compare&&"diff")
  },
  identifyDiffData:function(compare){
    let tabs=[],as=analyzer.setting
    tabs.push(...analyzer.curCompareTabs)
    tabs.shift()

    for(let k in analyzer.moduleData){
      let m=analyzer.moduleData[k]
      isDiffOnMissing(m)
      m.ts.forEach(x=>{
        isDiffOnMissing(x)
        if(!x.diff){
          isDiffItem(x,m)
        }
      })
    }
    analyzer.initAnaTopData()

    for(let k in formatter.data.scenarioAnaMap){
      setDiffInNodes(formatter.data.scenarioAnaMap[k])
    }
    
    function setDiffInNodes(m,p){
      if(m.nodes&&m.nodes.length){
        m.nodes.forEach(x=>{
          setDiffInNodes(x,m)
          if(m.diff&&m.diff.constructor==Array){
            if(m.term){
              m.diff.forEach(y=>{
                if(p){
                  p.diff=m.diff
                }
              })
            }
          }else if(p){
            if(p.term){
              for(let k in m.term){
                if(m.term[k].diff){
                  p.term[k].diff=p.term[k].diff||new Set()
                  let xx=[]
                  xx.push(...m.term[k].diff)
                  xx.forEach(y=>p.term[k].diff.add(y))
                }
              }
            }else if(m.diff){
            }
          }
        })
      }
      m.hide=0
      if(m.term){
        let master=m.term.master
        if(!master){
          if(analyzer.setting.missTest){
            for(let k in m.term){
              m.diff=1
              m.term[k].diff=1
            }
            if(p){
              p.diff=Object.keys(m.term)
            }
          }
        }else{
          if(!tabs.find(x=>{
            if(!m.term[x]){
              if(analyzer.setting.missTest){
                master.diff=1
                if(p){
                  p.diff=["master"]
                }
              }
              return 1
            }
          })){
            if(!isDiffItem(m,p)&&p&&p.type=="scenario"&&analyzer.setting.diffScenario){
              if(!analyzer.setting.showAll){
                m.hide=1
              }else{
                m.hide=0
              }
            }
          }
        }
      }
    }
    
    
    function isDiffItem(m,p){
      let mm=m.term.master,hasDiff;
      tabs.forEach(x=>{
        let t=m.term[x]
        if(as.diffResult){
          if(t.success!=mm.success){
            setDiff(t,"success")
            hasDiff=1
          }
          if(t.failed!=mm.failed){
            setDiff(t,"failed")
            hasDiff=1
          }
          if(t.result!=mm.result){
            setDiff(t,t.result)
            hasDiff=1
          }
        }
        if(t.average){
          if(isDiffTime(t.average,mm.average)){
            setDiff(t,"time")
            hasDiff=1
          }
        }else{
          if(isDiffTime(t.time,mm.time)){
            setDiff(t,"time")
            hasDiff=1
          }
        }
        if(t.diff&&p&&p.term){
          if(!hasDiff&&p&&p.type=="scenario"&&analyzer.setting.diffScenario){
            delete t.diff
          }else{
            if(!p.term[x].diff||p.term[x].diff.constructor!=Set){
              p.term[x].diff=new Set();
            }
            t=[...t.diff]

            t.forEach(y=>p.term[x].diff.add(y))
          }
        }
      })
      return hasDiff
    }
    
    function setDiff(x,v){
      x.diff=x.diff||new Set()
      x.diff.add(v)
    }

    function isDiffOnMissing(m){
      if(!m.term.master){
        m.diff=1
        for(let k in m.term){
          m.term[k].diff=1
        }
      }else{
        tabs.forEach(x=>{
          if(!m.term[x]){
            m.diff=1
            m.term.master.diff=1
          }
        })
      }
    }
    function isDiffTime(a,b){
      let v=Math.abs(a-b)
      let p=Math.max(v/a,v/b)
      if(v>as.second&&p>as.percentage){
        return 1
      }
    }
  },
  showDiffSetting:function(){
    let as=analyzer.setting,
        o=$(".bz-pop-panel")
    o.attr({type:""})
    o.find("div.bz-box").html(`
      <div style="margin:10px 20px">
        <h3 style="margin-left:5px;">Diff tool config</h3>
        <label style="margin-left:5px;">Show differences when</label> 
        <br/><br/>
        <label style="margin-left:5px;">Execution time differs more than <input type="number" id="percentage"> percent (%)</label>
        <br/><br/>
        <label style="margin-left:5px;">Ignore execution time differences up to <input type="number" id="second"> seconds (s)</label>
        <br/><br/>
        <label><input type="checkbox" id="diffScenario">Compare on scenario-level only</label>
        <br/><br/>
        <label><input type="checkbox" id="diffResult">Test result changes (Pass <-> Fail)</label>
        <br/><br/>
        <label><input type="checkbox" id="missTest">Missing test case</label>
      </div>
      <div style="text-align: center;margin: 15px 0 10px 0;"><button class="std">Run diff</button></div>
    `)
    
    $("#diffResult").attr({checked:!!as.diffResult})
    $("#missTest").attr({checked:!!as.missTest})
    $("#diffScenario").attr({checked:!!as.diffScenario})
    $("#second").val(as.second)
    $("#percentage").val(as.percentage*100)

    $("#diffResult").click(function(){
      as.diffResult=this.checked
    })
    $("#missTest").click(function(){
      as.missTest=this.checked
    })
    $("#diffScenario").click(function(){
      as.diffScenario=this.checked
    })
    $("#second").change(function(){
      as.second=this.value
    })
    $("#percentage").change(function(){
      as.percentage=this.value/100
    })
    $(".std").click(function(){
      analyzer.showAnalyzePanel("diff")
    })
  },
  clearDiff:function(d){
    for(let k in d){
      let m=d[k]
      m.diff=0
      clearTerm(m)

      if(m.ts){
        m.ts.forEach(x=>{
          clearTerm(x)
        })
      }
    }
    function clearTerm(m){
      for(let k in m.term){
        m.term[k].diff=0
      }
      if(m.nodes){
        m.nodes.forEach(x=>{
          clearTerm(x)
        })
      }
    }
    for(let k in formatter.data.scenarioMap){
      let s=formatter.data.scenarioMap[k]
      s.analyzed=0
    }
  },
  initAnaTopData:function(){
    for(let k in formatter.data.scenarioAnaMap){
      let m=formatter.data.scenarioAnaMap[k]
      
      m.nodes.forEach(y=>{
        for(let k in y.term){
          if(y.term[k].result=="success"){
            m.term[k].success++
          }else{
            m.term[k].failed++
          }
          m.term[k].time+=y.term[k].time
        }
      })
      for(let k in m.term){
        m.term[k].average=parseInt(m.term[k].time/(m.term[k].success+m.term[k].failed))
      }
    }
  },
  showAnalyzePanel:function(compare){
    let fd=formatter.data,
        o=$(".bz-pop-panel"), 
        compareScope="",
        compareTerm="",
        tabs=["master"]
    if(compare){
      tabs=[...analyzer.curCompareTabs]
    }
    analyzer.clearDiff(analyzer.moduleData);
    analyzer.clearDiff(formatter.data.scenarioAnaMap)
    for(let k in fd.scenarioAnaMap){
      let m=fd.scenarioAnaMap[k]
      m.term={}
      tabs.forEach(x=>{
        m.term[x]={success:0,failed:0,time:0}
      })
    }

    if(compare){
      analyzer.identifyDiffData(compare)
      let ks=analyzer.curCompareTabs
      compareScope=`
        <div>
          <label style='line-height: 40px;margin-right: 20px'><input type="checkbox" id="showAll" ${analyzer.setting.showAll&&"checked"}/> Show all</label>
        </div>
        <div style="margin:8px ‚Äã10p;">
          <button class="bz-icon bz-setting"></button>
        </div>`;
      compareTerm=`
        <div class="bz-term-bar ${analyzer.setting.tab!='hash'?'':'bz-in-hash'}">
          <div style="flex:1;"></div>
          ${ks.map(x=>`<div class="bz-term-title">${x}</div>`).join("")}
        </div>
      `
    }else{
      analyzer.initAnaTopData()
    }
    let md=analyzer.moduleData
    o.find("div.bz-box").html(`
      <div class="bz-tab-bar">
        <a class="bz-tab ${analyzer.setting.tab=='scenario'&&'bz-active'}" id="tab-scenario">Scenarios</a>
        <a class="bz-tab ${analyzer.setting.tab=='feature'&&'bz-active'}" id="tab-feature">Features</a>
        <a class="bz-tab ${analyzer.setting.tab=='module'&&'bz-active'}" id="tab-module">Modules</a>
        <a class="bz-tab ${analyzer.setting.tab=='hash'&&'bz-active'}" id="tab-hash">Error Hash</a>
        <div style="flex:1;"></div>
        ${compareScope}
      </div>
      ${compareTerm}
      <div class="bz-tab-panel bz-panel-tab-module" style='max-height:${window.innerHeight-250}px;${analyzer.setting.tab!='module'&&'display:none;'}'>
        ${getModuleResult(md,"test")}
      </div>
      <div class="bz-tab-panel bz-panel-tab-feature" style='max-height:${window.innerHeight-250}px;${analyzer.setting.tab!='feature'&&'display:none;'}'>
        ${getModuleResult(md,"scenario")}
      </div>
      <div class="bz-tab-panel bz-panel-tab-scenario" style='max-height:${window.innerHeight-250}px;${analyzer.setting.tab!='scenario'&&'display:none;'}'>
        ${getScenarioResult()}
      </div>
      <div class="bz-tab-panel bz-panel-tab-hash" style='max-height:${window.innerHeight-250}px;${analyzer.setting.tab!='hash'&&'display:none;'}'>
        ${getHashList()}
      </div>`)
    o.find(".bz-switch2").click(function(e){
      let pp=$(this.parentElement.nextElementSibling)
      if($(this).hasClass("bz-open")){
        $(this).removeClass("bz-open")
        pp.hide()
      }else{
        $(this).addClass("bz-open")
        pp.show()
      }
    })
    $("#showAll").click(function(){
      analyzer.setting.showAll=this.checked
      analyzer.showAnalyzePanel("diff")
    })
    $(".bz-tab").click(function(){
      $(".bz-tab").removeClass("bz-active")
      $(this).addClass("bz-active")
      $(".bz-tab-panel").hide()
      $(".bz-panel-"+this.id).show()
      analyzer.setting.tab=this.id.split("-").pop()
      if(this.id=="tab-hash"){
        $(".bz-term-bar").addClass("bz-in-hash")
      }else{
        $(".bz-term-bar").removeClass("bz-in-hash")
      }
    })
    o.show()

    $(".bz-setting").click(function(){
      analyzer.showDiffSetting()
    })
    
    function getHashList(){
      let headers=[]
      if(!compare){
        Object.keys(formatter.data.errHashMap).filter(x=>formatter.data.errHashMap[x].master).forEach(x=>{
          let d=formatter.data.errHashMap[x]
          formatter.data.errHashMap[x]={
            master:d.master,
            msg:d.msg
          }
        })
      }else{
        headers=new Set()
        Object.values(formatter.data.errHashMap).forEach(x=>Object.keys(x).filter(x=>$.isNumeric(x)).forEach(y=>headers.add(parseInt(y))))
        headers=[...headers]
        headers.sort()
      }
      
      let os= Object.keys(formatter.data.errHashMap);
      os.sort((a,b)=>{
        return formatter.data.errHashMap[a].msg>formatter.data.errHashMap[b].msg?1:-1
      })
      return os.map(k=>{
        let d=formatter.data.errHashMap[k]
        let ds=headers.map(x=>`<div class="bz-hash-val">${d[x]||""}</div>`).join("")
        return `
          <div class="bz-row" style="border-bottom:1px solid #CCC;padding:2px;">
            <div style="flex:1;"><span class="bz-hash-title bz-search-content">${k}</span><br/><span class="bz-hash-msg bz-line">${d.msg}</span></div>
            <div class="bz-hash-val">${d.master||""}</div>
            ${ds}
          </div>`
      }).join("")
    }
    
    function getModuleResult(md,type){
      let vs=Object.values(md)
      let w=vs.filter(x=>x.ts.find(y=>y.type==type)).map(x=>{
        return `
          <div class="${getSameClass(x)}">
            <div class='bz-row'>
              <button class='bz-mini-icon bz-switch bz-switch2'></button>
              <div class="bz-title-text" style="line-height:25px;">
                [${x.code}] ${x.name||""} (Tests: ${x.ts.length})
              </div>
              ${sortTerm(x).map((z,i)=>{
                return `
                  <span class='bz-icon bz-icon-col bz-mini-icon-letter bz-timer2 ${getDiffClass(x,z,i,"time")}' style='width:100px;'>${z.time}s</span>
                  <span class='bz-icon bz-icon-col bz-mini-icon-letter ${z.success?"bz-success":""} ${getDiffClass(x,z,i,"success")}'>${z.success||""}</span>
                  <span class='bz-icon bz-icon-col bz-mini-icon-letter ${z.failed?"bz-failed":""} ${getDiffClass(x,z,i,"failed")}'>${z.failed||""}${z.warn}</span>
                `
              }).join("")}
            </div>
            <div class='bz-panel bz-hide'>
              ${x.ts.map(x=>getTestResult(x,type)).join("")}
            </div>
            <hr class="${getSameClass(x)}"/>
          </div>
        `
      }).join("")
      return w
    }
    
    function getSameClass(x){
      if(compare&&!analyzer.setting.showAll){
        for(let k in x.term){
          if(x.term[k].diff){
            return ""
          }
        }
        return "bz-same-item"
      }
      return ""
    }

    function getTestResult(x,type){
      return `
        <div class="bz-row ${getSameClass(x)}">
          <div class='bz-title-text' style='margin-left:20px;'>
            <div class="bz-mini-icon bz-${type}"></div> [${x.code}] ${x.name}
          </div>
          ${sortTerm(x).map((z,i)=>{
            return `
              <span class='bz-icon bz-icon-col bz-mini-icon-letter bz-timer2 ${getDiffClass(x,z,i,"time")}2' style='width:100px;'>${z.time}s / ${z.average}s</span>
              <span class='bz-icon bz-icon-col bz-mini-icon-letter ${z.success?"bz-success":""} ${getDiffClass(x,z,i,"success")}2'>${z.success||""}</span>
              <span class='bz-icon bz-icon-col bz-mini-icon-letter ${z.failed?"bz-failed":""} ${getDiffClass(x,z,i,"failed")}2'>${z.failed||""}${z.warn}</span>
            `
          }).join("")}
        </div>
      `
    }
    
    function getDiffClass(s,m,i,kk){
      if(compare){
        let c="",//"bz-diff-item",
            c1="bz-diff-item1"
            
        for(let k in s.term){
          let x=s.term[k]
          if(x.diff){
            if(x.diff.constructor==Set){
              if(x.diff.has(kk)){
                let vs=[]
                for(let j in s.term){
                  vs.push(s.term[j][kk])
                }
                vs.sort((a,b)=>{
                  if(a>b){
                    return 1
                  }else{
                    return -1
                  }
                })

                if(kk=="success"){
                  vs.reverse()
                  if(vs[0]==m[kk]){
                    return c1
                  }
                }else if(kk=="failed"){
                  if(vs[0]==m[kk]){
                    return c1
                  }
                }else if(kk=="result"){
                  if(m[kk]=="success"){
                    return c1
                  }
                }else if(kk=="time"){
                  if(vs[0]==m[kk]){
                    return c1
                  }else{
                    m.persentage=parseInt((m[kk]-vs[0])/vs[0]*100)+"%"
                  }
                }
              }
            }else{
              return "bz-diff-item"
            }
            return ""
          }
        }
      }
      return ""
    }
    
    function sortTerm(o){
      return Object.keys(o.term).sort((a,b)=>{
        if(a=="master"){
          return -1
        }else if(b=="master"){
          return 1
        }else{
          return a>b?1:-1
        }
      }).map(x=>o.term[x])
    }
    
    function getScenarioResult(){
      return Object.values(fd.scenarioAnaMap).filter(x=>x).map(x=>{
        let ns=x.nodes.filter(u=>!u.hide)
        if(ns.length){
          let xx=Object.assign({},x)
          xx.nodes=ns
          return xx
        }
      }).filter(x=>x).map(x=>getNodeView(x,compare?0:"master")+`<hr class="${getSameClass(x)}"/>`).join("")
    }
    
    function getNodeView(s,k){
      return `
        <div class='bz-node ${getSameClass(s)}'>
          <div class="bz-row bz-node-title-bar">
            <button class="bz-mini-icon bz-switch bz-switch2 ${s.nodes.length?'':'bz-none'}"></button>
            <div class="bz-mini-icon bz-${s.name?s.type||"test":"hide"}"></div>
            <div class="bz-title-text">${s.name?"["+s.code+"] ":""}${s.name||s.code}</div>
            ${sortTerm(s).map((x,i)=>{
              if(s.type=="scenario"){
                return `<div style="width:100px;" class="${getDiffClass(s,x,i,"time")}2 bz-icon bz-icon-col bz-mini-icon-letter bz-icon-col bz-timer2">${x.time?x.time+"s / "+x.average+"s":""}</div>
                        <div class="${getDiffClass(s,x,i,"success")}2 bz-mini-icon-letter bz-icon-col bz-${x.success?'success':''}">${x.success||""}</div>
                        <div class="${getDiffClass(s,x,i,"failed")}2 bz-mini-icon-letter bz-icon-col bz-${x.failed?'failed':''}">${x.failed||""}</div>`
              }else{
                return `<div style="width:100px;" class="${getDiffClass(s,x,i,"time")}2 bz-icon bz-icon-col bz-mini-icon-letter bz-icon-col bz-timer2">${x.time}s${x.persentage?' ('+x.persentage+')':''}</div>
                        <div class="${getDiffClass(s,x,i,"success")}2 bz-mini-icon-letter bz-icon-col bz-success ${x.result=="success"?'':'bz-none'}"></div>
                        <div class="${getDiffClass(s,x,i,"failed")}2 bz-mini-icon-letter bz-icon-col bz-failed ${x.result=="success"?'bz-none':''}"></div>`
              }
            }).join("")}
          </div>
          <div class="bz-node-panel bz-hide">
            ${s.nodes.map(x=>getNodeView(x,k)).join("")}
          </div>
        </div>${!s.name?`<hr class="${getSameClass(s)}"/>`:""}`
        
    }
  },
  buildModuleData:function(key,map){
    analyzer.moduleData=analyzer.moduleData||{}
    let fd=formatter.data,ad=analyzer.moduleData;
    for(let m in map){
      let mm=map[m]
      let tm=mm.testMap
      let ts=Object.values(tm)
      
      ad[m]=ad[m]||{
        code:m,
        name:mm.name,
        ts:[],
        term:{}
      }
      let rm=ad[m]
      let tts=rm.ts
      
      rm=rm.term[key]=rm.term[key]||{
        success:0,
        failed:0,
        total:0,
        time:0,
        warn:""
      }
      

      ts.forEach(x=>{
        rm.total+=x.list.length
        let t={
          term:{}
        },slow=new Set(),repeat=new Set()
        
        t.term[key]={
          success:0,
          failed:0,
          time:0,
          average:0,
          warn:"",
          slow:"",
          repeat:""
        }
        let tt=t.term[key]
        x.list.forEach(y=>{
          if(!t.type){
            if(y.scenario){
              t.type="scenario"
            }else{
              t.type="test"
            }
            t.name=y.name
            t.code=y.code
          }
          if(y.result!="failed"){
            tt.success++
          }else{
            tt.failed++
          }
          tt.time+=parseInt(y.time)
          if(y.slow){
            slow.add(y.slow)
          }
          if(y.repeat){
            repeat.push(y.repeat)
          }
        })
        tt.average=parseInt(tt.time/(tt.success+tt.failed))
        slow=[...slow]
        repeat=[...repeat]
        if(slow.length){
          slow=slow.map(x=>getScenarioTitle(x))
          tt.slow="Slow in scenarios:\n"+slow.join("\n")
        }
        if(repeat.length){
          repeat=repeat.map(x=>getScenarioTitle(x))
          tt.repeat="Too many repeat in scenarios:\n"+repeat.join("\n")
        }
        tt.msg=(tt.slow+"\n\n"+tt.repeat).trim()

        if(tt.msg){
          tt.warn=`<span class='bz-mini-letter' title='${tt.msg}'>‚ö†Ô∏è</span>`
          rm.warn="<span class='bz-mini-letter'>‚ö†Ô∏è</span>"
        }
        
        if(!tts.find(y=>{
          if(y.code==x.list[0].code){
            y.term[key]=t.term[key]
            return 1
          }
        })){
          tts.push(t)
        }
        rm.success+=tt.success
        rm.failed+=tt.failed
        rm.time+=tt.time
      })
    }
    
    function getScenarioTitle(x){
      let o=fd.scenarioMap[x]
      if(o){
        return o.title
      }else{
        return x
      }
    }
  },
  buildMasterAnalysisData:function(){
    let fd=formatter.data;
    let mp=fd.moduleMap

    for(let k in fd.scenarioMap){
      let s=fd.scenarioMap[k]
      if(!s.analyzed){
        if(!s.time){
          s.time=formatter.getSpendTime(s.start,s.endTime)
        }
        let sc=s.code.split("-")
        let cs={
          m:sc[0],
          t:sc[1],
          w:sc.pop(),
          code:`${sc[0]}.${sc[1]}`,
          name:s.name,
          idx:parseInt(sc[2]||0),
          title:s.title,
          time:parseInt(s.time),
          slow:parseInt(s.time)>parseInt(fd.setting.scenarioTime)?s.code:0,
          scenario:1,
          result:s.result
        }
        
        analyzer.addAnalyzeData(mp,cs,fd.scenarioAnaMap,"master")
        formatter.loadModuleInfo(s.init.org);
        formatter.loadModuleInfo(s.details.org);

        s.analyzed=analyzer.retrieveAnalyzeData("master",mp,s.details.org,1,cs)
        
        s.bug&&analyzer.retrieveErrHash("master",s.bug)
      }
    }
  },
  getTestTreeByLevel:function(v,level){
    let r;
    if(level){
      r=`/[0-9]+: {${level*6+3}}(>+ Loading |<+ )[^\[]*Test \\[m[0-9]+\\.t[0-9]+[^><]+(>|<)+/gms`
    }else{
      r=`/[0-9]+: +(>+ Loading |<+ [^\[]+ Feature - )Scenario \\[m[0-9]+\\.t[0-9]+[^><]+(>|<)+/gms`
    }
    r=eval(r)
    return v.match(r)||[]
  },
  retrieveErrHash:function(k,v){
    let h,msg;
    if(v.constructor==Object){
      h=v.hash
      msg=v.msg.match(/Failed on Action: m[0-9]+.+$/m)||[""]
    }else{
      h=v.match(/\[Error Hash\: ([0-9A-F]+)\] \((.+)\)/)
      if(h){
        h=h[1]
      }
      msg=v.match(/Failed on Action: m[0-9]+.+$/m)||[""]
    }

    msg=msg[0]

    formatter.data.errHashMap[h]=formatter.data.errHashMap[h]||{msg:msg}
    formatter.data.errHashMap[h][k]=formatter.data.errHashMap[h][k]||0
    formatter.data.errHashMap[h][k]+=1
  }
}

setTimeout(()=>{
  formatter.autoLoading()
  window.onresize=function(){
    formatter.chkXray()
  }
},100)

let lastUrl = location.href; 
new MutationObserver(() => {
  const url = location.href;
  if (url !== lastUrl) {
    lastUrl = url;
    formatter.autoLoading()
  }
}).observe(document, {subtree: true, childList: true});